(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,616987,936535,e=>{"use strict";e.s(["calculateMarginfiTokenBalance",()=>R,"fixedPointFromI80F48",()=>S,"getBank",()=>P,"getMarginfiAccount",()=>E,"getUsdcTokenAccount",()=>_],616987);var t,r,n,a,i,s=e.i(467034),o=e.i(127261),c=e.i(994447),u=e.i(828073),l=e.i(704290);e.s(["computeInterestRates",()=>b,"deserializeBank",()=>g],936535);var d=e.i(659341),f=((t=f||{})[t.None=0]="None",t[t.PythEMA=1]="PythEMA",t[t.SwitchboardV2=2]="SwitchboardV2",t),p=((r=p||{})[r.Collateral=0]="Collateral",r[r.Isolated=1]="Isolated",r),h=((n=h||{})[n.Paused=0]="Paused",n[n.Operational=1]="Operational",n[n.ReduceOnly=2]="ReduceOnly",n),y=((a=y||{})[a.EmissionsFlagBorrowActive=1]="EmissionsFlagBorrowActive",a[a.EmissionsFlagLendingActive=2]="EmissionsFlagLendingActive",a[a.PermissionlessBadDebtSettlement=4]="PermissionlessBadDebtSettlement",a);function g(e){let t,r=0,n=()=>{let t=new o.PublicKey(s.Buffer.from(e.subarray(r,r+32)));return r+=32,t},a=()=>{let t=S(s.Buffer.from(e.subarray(r,r+16)));return r+=16,t},i=t=>{let n=s.Buffer.from(e.subarray(r,r+t));return r+=t,n},c=()=>{let t=new d.default(e.subarray(r,r+8),"le");return r+=8,BigInt(t.toString())};r+=8;let u=n(),l=e[r++],f=n(),p=i(7),h=a(),y=a(),g=n(),m=e[r++],w=e[r++],b=n(),A=e[r++],T=e[r++],C=i(4),I=a(),P=n(),E=e[r++],R=e[r++],_=i(6),k=a(),D=a(),x=a(),B=c(),v={assetWeightInit:a(),assetWeightMaint:a(),liabilityWeightInit:a(),liabilityWeightMaint:a(),depositLimit:c(),interestRateConfig:{optimalUtilizationRate:a(),plateauInterestRate:a(),maxInterestRate:a(),insuranceFeeFixedApr:a(),insuranceIrFee:a(),protocolFixedFeeApr:a(),protocolIrFee:a(),protocolOriginationFee:a(),_missingPadding:i(112)},operationalState:e[r++],setup:e[r++],keys:[,,,,,].fill(0).map(()=>n()),_padding4:i(6),borrowLimit:c(),riskTier:e[r++],_padding5:i(7),totalAssetValueInitLimit:c(),oracleMaxAge:(t=new d.default(e.subarray(r,r+2),"le"),r+=2,t.toNumber()),_padding6:i(38)},K=Number(c()),U=c(),N=a(),M=n(),O=a();return i(944),{mint:u,mintDecimals:l,group:f,assetShareValue:h,liabilityShareValue:y,liquidityVault:g,liquidityVaultBump:m,liquidityVaultAuthorityBump:w,insuranceVault:b,insuranceVaultBump:A,insuranceVaultAuthorityBump:T,collectedInsuranceFeesOutstanding:I,feeVault:P,feeVaultBump:E,feeVaultAuthorityBump:R,collectedGroupFeesOutstanding:k,totalLiabilityShares:D,totalAssetShares:x,lastUpdate:B,config:v,flags:K,emissionsRate:U,emissionsRemaining:N,emissionsMint:M,collectedProgramFeesOutstanding:O,_padding1:p,_padding2:C,_padding3:_}}let m=e=>{let t=new u.default(8760),r=e.div(t);return Math.pow(Number(new u.default(1).plus(r)),Number(t))-1};function w(e){let t=e.totalAssetShares.times(e.assetShareValue),r=e.totalLiabilityShares.times(e.liabilityShareValue);return t.isZero()?new u.default(0):r.div(t)}function b(e){let{insuranceFeeFixedApr:t,insuranceIrFee:r,protocolFixedFeeApr:n,protocolIrFee:a}=e.config.interestRateConfig,i=t.plus(n),s=r.plus(a),o=function(e){let{optimalUtilizationRate:t,plateauInterestRate:r,maxInterestRate:n}=e.config.interestRateConfig,a=w(e);return a.lte(t)?a.times(r).div(t):a.minus(t).div(new u.default(1).minus(t)).times(n.minus(r)).plus(r)}(e),c=w(e);return{lendingRate:m(o.times(c)),borrowingRate:m(o.times(new u.default(1).plus(s)).plus(i))}}var A=((i=A||{})[i.DisabledFlag=1]="DisabledFlag",i),T=e.i(458768);e.i(465903);var C=e.i(767924);let I=new l.Decimal(2).pow(48);function S(e){try{if(16!==e.length)throw Error("Expected a 16-byte buffer");let t=Array.from(e);t.reverse();let r="",n=t[0];128&n&&(r="-",t=t.map(e=>255&~e));let a=r+"0x"+t.map(e=>e.toString(16).padStart(2,"0")).join(""),i=new l.Decimal(a).dividedBy(I);return new u.default(i.toString())}catch{return T.default.error("Error decoding account data"),new u.default(0)}}async function P(e,t){try{let r=await e.getAccountInfo(t);if(!r)throw Error("Bank not found");return g(r.data)}catch{return T.default.error("Error fetching marginfi vault information"),null}}async function E(e,t){try{let r=null;for(let n=0;n<15&&!(r=await e.getAccountInfo(t));n++)await new Promise(e=>setTimeout(e,2e3));if(!r)throw Error("Marginfi account not found");return function(e){let t=0,r=()=>{let r=new o.PublicKey(s.Buffer.from(e.subarray(t,t+32)));return t+=32,r},n=()=>{let r=S(s.Buffer.from(e.subarray(t,t+16)));return t+=16,r},a=r=>{let n=s.Buffer.from(e.subarray(t,t+r));return t+=r,n},i=()=>{let r=new d.default(e.subarray(t,t+8),"le");return t+=8,BigInt(r.toString())};t+=8;let c=r(),u=r(),l=[];for(let s=0;s<16;s++){let s={active:1===e[t++],bankPk:r(),_pad0:a(7),assetShares:n(),liabilityShares:n(),emissionsOutstanding:n(),lastUpdate:i(),_pad1:a(8)};l.push(s)}let f={balances:l,padding:a(64)},p=Number(i());return{group:c,authority:u,lendingAccount:f,accountFlags:p,padding:a(504)}}(r.data)}catch{return T.default.error("Error fetching marginfi account information"),null}}function R(e,t){let r=t.lendingAccount.balances.find(e=>e?.bankPk?.toBase58()===c.USDC_BANK_STATE);return r?Number(r.assetShares)*Number(e.assetShareValue)/10**e.mintDecimals:0}function _(e){let[t]=o.PublicKey.findProgramAddressSync([e.toBuffer(),new o.PublicKey(C.TOKEN_PROGRAM_ADDRESS).toBuffer(),new o.PublicKey(c.USDC_MINT).toBuffer()],new o.PublicKey(C.ASSOCIATED_TOKEN_PROGRAM_ADDRESS));return t}},599047,e=>{"use strict";var t=e.i(467034),r=e.i(127261);e.i(465903);var n=e.i(767924),a=e.i(103476),i=e.i(659341),s=e.i(994447),o=e.i(458768),c=e.i(85026),u=e.i(350721),l=e.i(616987),d=e.i(268804),f=e.i(973444);let p="marginfi-transaction-toast";function h(e){return r.PublicKey.findProgramAddressSync([t.Buffer.from("liquidity_vault"),e.toBuffer()],new r.PublicKey(s.MARGINFI_PROGRAM_ID))[0]}let y=async(e,o,c)=>{let u=r.Keypair.fromSecretKey(a.default.decode(e)),d=new r.TransactionInstruction({programId:new r.PublicKey("ComputeBudget111111111111111111111111111111"),keys:[],data:t.Buffer.from([2,...new i.default(1e5).toArrayLike(t.Buffer,"le",4)])}),p=new r.TransactionInstruction({programId:new r.PublicKey("ComputeBudget111111111111111111111111111111"),keys:[],data:t.Buffer.from([3,...new i.default(1e6).toArrayLike(t.Buffer,"le",8)])}),y=(0,f.newSafeBN)(1e6*o),g=t.Buffer.alloc(17);g.set([171,94,235,103,82,64,212,140],0);let m=y.toArrayLike(t.Buffer,"le",8);g.set(m,8),g.writeUInt8(0,16);let w=(0,l.getUsdcTokenAccount)(u.publicKey),b=new r.TransactionInstruction({programId:new r.PublicKey(s.MARGINFI_PROGRAM_ID),keys:[{pubkey:new r.PublicKey(s.MARGINFI_GROUP_ID),isSigner:!1,isWritable:!1},{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:u.publicKey,isSigner:!0,isWritable:!1},{pubkey:new r.PublicKey(s.USDC_BANK_STATE),isSigner:!1,isWritable:!0},{pubkey:w,isSigner:!1,isWritable:!0},{pubkey:h(new r.PublicKey(s.USDC_BANK_STATE)),isSigner:!1,isWritable:!0},{pubkey:new r.PublicKey(n.TOKEN_PROGRAM_ADDRESS),isSigner:!1,isWritable:!1}],data:g});return{transaction:new r.Transaction().add(p).add(d).add(b),signers:[u]}},g=async(e,o,u,d,p)=>{var y;let g,m,w=r.Keypair.fromSecretKey(a.default.decode(e)),b=new r.TransactionInstruction({programId:new r.PublicKey("ComputeBudget111111111111111111111111111111"),keys:[],data:t.Buffer.from([3,...new i.default(1e6).toArrayLike(t.Buffer,"le",8)])}),A=new r.TransactionInstruction({programId:new r.PublicKey("ComputeBudget111111111111111111111111111111"),keys:[],data:t.Buffer.from([2,...new i.default(15e4).toArrayLike(t.Buffer,"le",4)])}),T=(0,l.getUsdcTokenAccount)(w.publicKey),C=new r.TransactionInstruction({programId:new r.PublicKey(s.MARGINFI_PROGRAM_ID),keys:[{pubkey:new r.PublicKey(s.MARGINFI_GROUP_ID),isSigner:!1,isWritable:!1},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:w.publicKey,isSigner:!0,isWritable:!0},{pubkey:new r.PublicKey(s.USDC_BANK_STATE),isSigner:!1,isWritable:!0},{pubkey:new r.PublicKey(T),isSigner:!1,isWritable:!0},{pubkey:(y=new r.PublicKey(s.USDC_BANK_STATE),r.PublicKey.findProgramAddressSync([t.Buffer.from("liquidity_vault_auth"),y.toBuffer()],new r.PublicKey(s.MARGINFI_PROGRAM_ID))[0]),isSigner:!1,isWritable:!0},{pubkey:h(new r.PublicKey(s.USDC_BANK_STATE)),isSigner:!1,isWritable:!0},{pubkey:new r.PublicKey(n.TOKEN_PROGRAM_ADDRESS),isSigner:!1,isWritable:!1},{pubkey:new r.PublicKey(s.USDC_BANK_STATE),isSigner:!1,isWritable:!1},{pubkey:new r.PublicKey(s.USDC_PYTHNET_CUSTODY_PRICE_ACCOUNT),isSigner:!1,isWritable:!1}],data:((g=t.Buffer.alloc(18)).set([36,72,74,19,210,210,192,192],0),m=(0,f.newSafeBN)(1e6*o).toArrayLike(t.Buffer,"le",8),g.set(m,8),g.writeUInt8(+!p,16),g)}),I=new r.Transaction().add(A).add(b);return((e,t,r,n)=>{if(!e){let{ataInstruction:e}=(0,c.makeCreateATAInstruction)(t,s.USDC_MINT,n);r.push(e)}})(u,w.publicKey,I.instructions,n.TOKEN_PROGRAM_ADDRESS),I.add(C),{transaction:I,signers:[w]}},m=async(e,n,l)=>{try{let f,h,y,g,m,{transaction:w,signers:b,marginfiAccountPubkey:A}=await (f=r.Keypair.fromSecretKey(a.default.decode(e)),h=new r.TransactionInstruction({programId:new r.PublicKey("ComputeBudget111111111111111111111111111111"),keys:[],data:t.Buffer.from([3,...new i.default(1e6).toArrayLike(t.Buffer,"le",8)])}),y=new r.TransactionInstruction({programId:new r.PublicKey("ComputeBudget111111111111111111111111111111"),keys:[],data:t.Buffer.from([2,...new i.default(56107).toArrayLike(t.Buffer,"le",4)])}),g=r.Keypair.generate(),m=new r.TransactionInstruction({programId:new r.PublicKey(s.MARGINFI_PROGRAM_ID),keys:[{pubkey:new r.PublicKey(s.MARGINFI_GROUP_ID),isSigner:!1,isWritable:!1},{pubkey:g.publicKey,isSigner:!0,isWritable:!0},{pubkey:f.publicKey,isSigner:!0,isWritable:!0},{pubkey:f.publicKey,isSigner:!0,isWritable:!0},{pubkey:r.SystemProgram.programId,isSigner:!1,isWritable:!1}],data:t.Buffer.from([43,78,61,255,148,52,249,154])}),{transaction:new r.Transaction().add(h).add(y).add(m),signers:[f,g],marginfiAccountPubkey:g.publicKey}),{base64Tx:T}=await (0,c.compileTransaction)({signer:b,instructions:w.instructions,blockhash:n});return await (0,u.sendAndMonitorSimpleTx)(T,p,()=>{},()=>{o.default.success("Successfully created marginfi account",{toastId:p}),d.axiomApiV2.post("/add-yield-account",{walletAddress:r.Keypair.fromSecretKey(a.default.decode(e)).publicKey.toBase58(),marginfiAddress:A.toBase58()}).catch(e=>{console.error(e)}),l?.(A)}),A}catch{return o.default.error("Error creating marginfi account",{toastId:p}),null}},w=async(e,t,r,n,a)=>{try{let{transaction:i,signers:s}=await y(e,t,r),{base64Tx:l}=await (0,c.compileTransaction)({signer:s,instructions:i.instructions,blockhash:n}),f=Number(t);await (0,u.sendAndMonitorSimpleTx)(l,p,()=>{},()=>{o.default.success(`Deposit successful for ${t.toFixed(6)} USDC`,{toastId:p}),d.axiomApiV2.post("/update-yield-account",{type:"deposit",usdcAmount:f}).catch(e=>{console.error(e)}),a?.()})}catch{o.default.error("Error depositing",{toastId:p})}},b=async(e,t,r,n,a,i,s)=>{try{let{transaction:l,signers:f}=await g(e,t,r,n,s),{base64Tx:h}=await (0,c.compileTransaction)({signer:f,instructions:l.instructions,blockhash:a}),y=Number(t);await (0,u.sendAndMonitorSimpleTx)(h,p,()=>{},()=>{o.default.success(`Withdrawal successful for ${t.toFixed(6)} USDC`,{toastId:p}),d.axiomApiV2.post("/update-yield-account",{type:"withdraw",usdcAmount:y}).catch(e=>{console.error(e)}),i?.()})}catch{o.default.error("Error withdrawing USDC",{toastId:p})}};e.s(["GOOD_GAS_PRICE",0,1e6,"createMarginfiAccount",()=>m,"marginfiDepositUsdc",()=>w,"marginfiWithdrawUsdc",()=>b])},828296,e=>{"use strict";var t=e.i(843476);e.s(["ButtonOrnament",0,({label:e,isSelected:r=!1,onClick:n,className:a="",disabled:i=!1})=>(0,t.jsx)("button",{onClick:e=>{e.preventDefault(),e.stopPropagation(),n?.()},disabled:i,className:`
        flex flex-row flex-1 p-[4px] h-[28px] justify-center items-center rounded-[8px] sm:rounded-[4px]
        ${r?"bg-secondaryStroke":"hover:bg-secondaryStroke/20 hover:transition-[background-color] hover:duration-150"}
        ${i?"hover:bg-transparent hover:cursor-not-allowed":""}
        ${a}
      `,children:(0,t.jsx)("span",{className:`
          text-[14px] leading-[20px] font-medium
          ${r?"text-textPrimary":"text-textTertiary"}
          ${i?"opacity-50":""}
        `,children:e})})])},180369,e=>{"use strict";var t=e.i(639372),r=e.i(271645),n=e.i(741124),a=e.i(43351),i=e.i(750214);let s=(0,t.atom)(e=>{switch(e(n.currentChainAtom)){case"bnb":return e(a.usdPerBnbAtom);case"sol":return e(a.usdPerSolAtom);default:return 500}});function o(){let e=(0,i.useAtomCallback)((0,r.useCallback)(e=>e(n.currentChainAtom),[])),t=(0,i.useAtomCallback)((0,r.useCallback)(e=>e(a.usdPerSolAtom),[])),s=(0,i.useAtomCallback)((0,r.useCallback)(e=>e(a.usdPerBnbAtom),[])),o=(0,r.useMemo)(()=>({sol:t,bnb:s}),[t,s]),c=(0,r.useCallback)(t=>o[t??e()](),[e,o]);return(0,r.useMemo)(()=>c,[c])}e.s(["usdPerNativeAtom",0,s,"useUsdToNative",()=>o])},518201,e=>{"use strict";function t(e){let t=e.length,r=0,n=0;for(;n<t;){let a=e.charCodeAt(n++);if((0xffffff80&a)==0){r++;continue}if((0xfffff800&a)==0)r+=2;else{if(a>=55296&&a<=56319&&n<t){let t=e.charCodeAt(n);(64512&t)==56320&&(++n,a=((1023&a)<<10)+(1023&t)+65536)}(0xffff0000&a)==0?r+=3:r+=4}}return r}let r=new TextEncoder;function n(e,t,n){if(e.length>50)r.encodeInto(e,t.subarray(n));else!function(e,t,r){let n=e.length,a=r,i=0;for(;i<n;){let r=e.charCodeAt(i++);if((0xffffff80&r)==0){t[a++]=r;continue}if((0xfffff800&r)==0)t[a++]=r>>6&31|192;else{if(r>=55296&&r<=56319&&i<n){let t=e.charCodeAt(i);(64512&t)==56320&&(++i,r=((1023&r)<<10)+(1023&t)+65536)}(0xffff0000&r)==0?t[a++]=r>>12&15|224:(t[a++]=r>>18&7|240,t[a++]=r>>12&63|128),t[a++]=r>>6&63|128}t[a++]=63&r|128}}(e,t,n)}function a(e,t,r){let n=t,a=n+r,i=[],s="";for(;n<a;){let t=e[n++];if((128&t)==0)i.push(t);else if((224&t)==192){let r=63&e[n++];i.push((31&t)<<6|r)}else if((240&t)==224){let r=63&e[n++],a=63&e[n++];i.push((31&t)<<12|r<<6|a)}else if((248&t)==240){let r=(7&t)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++];r>65535&&(r-=65536,i.push(r>>>10&1023|55296),r=56320|1023&r),i.push(r)}else i.push(t);i.length>=4096&&(s+=String.fromCharCode(...i),i.length=0)}return i.length>0&&(s+=String.fromCharCode(...i)),s}let i=new TextDecoder;function s(e,t,r){let n;if(!(r>200))return a(e,t,r);return n=e.subarray(t,t+r),i.decode(n)}e.s(["utf8Count",()=>t,"utf8Decode",()=>s,"utf8DecodeJs",()=>a,"utf8Encode",()=>n])},965389,70026,658419,e=>{"use strict";class t{constructor(e,t){this.type=e,this.data=t}}class r extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Object.create(r.prototype)),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:r.name})}}function n(e,t,r){e.setUint32(t,r/0x100000000),e.setUint32(t+4,r)}function a(e,t,r){let n=Math.floor(r/0x100000000);e.setUint32(t,n),e.setUint32(t+4,r)}function i(e,t){return 0x100000000*e.getInt32(t)+e.getUint32(t+4)}function s(e,t){return 0x100000000*e.getUint32(t)+e.getUint32(t+4)}e.s(["DecodeError",()=>r],70026),e.s(["UINT32_MAX",0,0xffffffff,"getInt64",()=>i,"getUint64",()=>s,"setInt64",()=>a,"setUint64",()=>n],658419);let o={type:-1,encode:function(e){if(!(e instanceof Date))return null;{let t,r,n,i;return function({sec:e,nsec:t}){if(e>=0&&t>=0&&e<=0x3ffffffff)if(0===t&&e<=0xffffffff){let t=new Uint8Array(4);return new DataView(t.buffer).setUint32(0,e),t}else{let r=e/0x100000000,n=new Uint8Array(8),a=new DataView(n.buffer);return a.setUint32(0,t<<2|3&r),a.setUint32(4,0|e),n}{let r=new Uint8Array(12),n=new DataView(r.buffer);return n.setUint32(0,t),a(n,4,e),r}}((r=Math.floor((t=e.getTime())/1e3),i=Math.floor((n=(t-1e3*r)*1e6)/1e9),{sec:r+i,nsec:n-1e9*i}))}},decode:function(e){let t=function(e){let t=new DataView(e.buffer,e.byteOffset,e.byteLength);switch(e.byteLength){case 4:return{sec:t.getUint32(0),nsec:0};case 8:{let e=t.getUint32(0);return{sec:(3&e)*0x100000000+t.getUint32(4),nsec:e>>>2}}case 12:return{sec:i(t,4),nsec:t.getUint32(0)};default:throw new r(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${e.length}`)}}(e);return new Date(1e3*t.sec+t.nsec/1e6)}};class c{constructor(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(o)}register({type:e,encode:t,decode:r}){if(e>=0)this.encoders[e]=t,this.decoders[e]=r;else{let n=-1-e;this.builtInEncoders[n]=t,this.builtInDecoders[n]=r}}tryToEncode(e,r){for(let n=0;n<this.builtInEncoders.length;n++){let a=this.builtInEncoders[n];if(null!=a){let i=a(e,r);if(null!=i)return new t(-1-n,i)}}for(let n=0;n<this.encoders.length;n++){let a=this.encoders[n];if(null!=a){let i=a(e,r);if(null!=i)return new t(n,i)}}return e instanceof t?e:null}decode(e,r,n){let a=r<0?this.builtInDecoders[-1-r]:this.decoders[r];return a?a(e,r,n):new t(r,e)}}c.defaultCodec=new c,e.s(["ExtensionCodec",()=>c],965389)},210274,e=>{"use strict";function t(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer||"undefined"!=typeof SharedArrayBuffer&&e instanceof SharedArrayBuffer?new Uint8Array(e):Uint8Array.from(e)}e.s(["ensureUint8Array",()=>t])},492975,e=>{"use strict";var t=e.i(675107);async function r(e,{chain:r}){let{id:n,name:a,nativeCurrency:i,rpcUrls:s,blockExplorers:o}=r;await e.request({method:"wallet_addEthereumChain",params:[{chainId:(0,t.numberToHex)(n),chainName:a,nativeCurrency:i,rpcUrls:s.default.http,blockExplorerUrls:o?Object.values(o).map(({url:e})=>e):void 0}]},{dedupe:!0,retryCount:0})}e.s(["addChain",()=>r])},888794,611573,942305,10725,e=>{"use strict";var t=e.i(189991),r=e.i(569934);class n extends r.BaseError{constructor({docsPath:e}={}){super("Could not find an Account to execute with this Action.\nPlease provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client.",{docsPath:e,docsSlug:"account",name:"AccountNotFoundError"})}}class a extends r.BaseError{constructor({docsPath:e,metaMessages:t,type:r}){super(`Account type "${r}" is not supported.`,{docsPath:e,metaMessages:t,name:"AccountTypeNotSupportedError"})}}e.s(["AccountNotFoundError",()=>n,"AccountTypeNotSupportedError",()=>a],611573);var i=e.i(290392),s=e.i(505880);function o({chain:e,currentChainId:t}){if(!e)throw new s.ChainNotFoundError;if(t!==e.id)throw new s.ChainMismatchError({chain:e,currentChainId:t})}e.s(["assertCurrentChain",()=>o],942305);var c=e.i(853532),u=e.i(393702),l=e.i(467078);function d(e,{docsPath:t,...r}){let n,a=(n=(0,l.getNodeError)(e,r))instanceof c.UnknownNodeError?e:n;return new u.TransactionExecutionError(a,{docsPath:t,...r})}e.s(["getTransactionError",()=>d],10725);var f=e.i(264404),p=e.i(190521),h=e.i(467125),y=e.i(976677),g=e.i(353464),m=e.i(975948),w=e.i(368941),b=e.i(638291);let A=new y.LruMap(128);async function T(e,s){let{account:c=e.account,chain:u=e.chain,accessList:l,authorizationList:y,blobs:T,data:C,gas:I,gasPrice:S,maxFeePerBlobGas:P,maxFeePerGas:E,maxPriorityFeePerGas:R,nonce:_,value:k,...D}=s;if(void 0===c)throw new n({docsPath:"/docs/actions/wallet/sendTransaction"});let x=c?(0,t.parseAccount)(c):null;try{(0,g.assertRequest)(s);let t=await (async()=>s.to?s.to:null!==s.to&&y&&y.length>0?await (0,i.recoverAuthorizationAddress)({authorization:y[0]}).catch(()=>{throw new r.BaseError("`to` is required. Could not infer from `authorizationList`.")}):void 0)();if(x?.type==="json-rpc"||null===x){let r;null!==u&&(r=await (0,h.getAction)(e,m.getChainId,"getChainId")({}),o({currentChainId:r,chain:u}));let n=e.chain?.formatters?.transactionRequest?.format,a=(n||p.formatTransactionRequest)({...(0,f.extract)(D,{format:n}),accessList:l,authorizationList:y,blobs:T,chainId:r,data:C,from:x?.address,gas:I,gasPrice:S,maxFeePerBlobGas:P,maxFeePerGas:E,maxPriorityFeePerGas:R,nonce:_,to:t,value:k}),i=A.get(e.uid);try{return await e.request({method:i?"wallet_sendTransaction":"eth_sendTransaction",params:[a]},{retryCount:0})}catch(t){if(!1===i)throw t;if("InvalidInputRpcError"===t.name||"InvalidParamsRpcError"===t.name||"MethodNotFoundRpcError"===t.name||"MethodNotSupportedRpcError"===t.name)return await e.request({method:"wallet_sendTransaction",params:[a]},{retryCount:0}).then(t=>(A.set(e.uid,!0),t)).catch(r=>{if("MethodNotFoundRpcError"===r.name||"MethodNotSupportedRpcError"===r.name)throw A.set(e.uid,!1),t;throw r});throw t}}if(x?.type==="local"){let r=await (0,h.getAction)(e,w.prepareTransactionRequest,"prepareTransactionRequest")({account:x,accessList:l,authorizationList:y,blobs:T,chain:u,data:C,gas:I,gasPrice:S,maxFeePerBlobGas:P,maxFeePerGas:E,maxPriorityFeePerGas:R,nonce:_,nonceManager:x.nonceManager,parameters:[...w.defaultParameters,"sidecars"],value:k,...D,to:t}),n=u?.serializers?.transaction,a=await x.signTransaction(r,{serializer:n});return await (0,h.getAction)(e,b.sendRawTransaction,"sendRawTransaction")({serializedTransaction:a})}if(x?.type==="smart")throw new a({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"});throw new a({docsPath:"/docs/actions/wallet/sendTransaction",type:x?.type})}catch(e){if(e instanceof a)throw e;throw d(e,{...s,account:x,chain:s.chain||void 0})}}e.s(["sendTransaction",()=>T],888794)},996980,450689,916207,829897,652946,288854,377018,599976,866797,79467,784248,439287,e=>{"use strict";var t=e.i(289169),r=e.i(888794);function n(e,n){let{abi:a,args:i,bytecode:s,...o}=n,c=(0,t.encodeDeployData)({abi:a,args:i,bytecode:s});return(0,r.sendTransaction)(e,{...o,...o.authorizationList?{to:null}:{},data:c})}e.s(["deployContract",()=>n],996980);var a=e.i(823838);async function i(e){return e.account?.type==="local"?[e.account.address]:(await e.request({method:"eth_accounts"},{dedupe:!0})).map(e=>(0,a.checksumAddress)(e))}async function s(e){return await e.request({method:"wallet_getPermissions"},{dedupe:!0})}e.s(["getAddresses",()=>i],450689),e.s(["getPermissions",()=>s],916207);var o=e.i(189991),c=e.i(611573),u=e.i(806685),l=e.i(467125),d=e.i(975948),f=e.i(937445);async function p(e,t){let{account:r=e.account,chainId:n,nonce:a}=t;if(!r)throw new c.AccountNotFoundError({docsPath:"/docs/eip7702/prepareAuthorization"});let i=(0,o.parseAccount)(r),s=(()=>{if(t.executor)return"self"===t.executor?t.executor:(0,o.parseAccount)(t.executor)})(),p={address:t.contractAddress??t.address,chainId:n,nonce:a};return void 0===p.chainId&&(p.chainId=e.chain?.id??await (0,l.getAction)(e,d.getChainId,"getChainId")({})),void 0===p.nonce&&(p.nonce=await (0,l.getAction)(e,f.getTransactionCount,"getTransactionCount")({address:i.address,blockTag:"pending"}),("self"===s||s?.address&&(0,u.isAddressEqual)(s.address,i.address))&&(p.nonce+=1)),p}async function h(e){return(await e.request({method:"eth_requestAccounts"},{dedupe:!0,retryCount:0})).map(e=>(0,a.getAddress)(e))}async function y(e,t){return e.request({method:"wallet_requestPermissions",params:[t]},{retryCount:0})}async function g(e,t){let{account:r=e.account}=t;if(!r)throw new c.AccountNotFoundError({docsPath:"/docs/eip7702/signAuthorization"});let n=(0,o.parseAccount)(r);if(!n.signAuthorization)throw new c.AccountTypeNotSupportedError({docsPath:"/docs/eip7702/signAuthorization",metaMessages:["The `signAuthorization` Action does not support JSON-RPC Accounts."],type:n.type});let a=await p(e,t);return n.signAuthorization(a)}e.s(["prepareAuthorization",()=>p],829897),e.s(["requestAddresses",()=>h],652946),e.s(["requestPermissions",()=>y],288854),e.s(["signAuthorization",()=>g],377018);var m=e.i(675107);async function w(e,{account:t=e.account,message:r}){if(!t)throw new c.AccountNotFoundError({docsPath:"/docs/actions/wallet/signMessage"});let n=(0,o.parseAccount)(t);if(n.signMessage)return n.signMessage({message:r});let a="string"==typeof r?(0,m.stringToHex)(r):r.raw instanceof Uint8Array?(0,m.toHex)(r.raw):r.raw;return e.request({method:"personal_sign",params:[a,n.address]},{retryCount:0})}e.s(["signMessage",()=>w],599976);var b=e.i(942305),A=e.i(190521),T=e.i(353464);async function C(e,t){let{account:r=e.account,chain:n=e.chain,...a}=t;if(!r)throw new c.AccountNotFoundError({docsPath:"/docs/actions/wallet/signTransaction"});let i=(0,o.parseAccount)(r);(0,T.assertRequest)({account:i,...t});let s=await (0,l.getAction)(e,d.getChainId,"getChainId")({});null!==n&&(0,b.assertCurrentChain)({currentChainId:s,chain:n});let u=n?.formatters||e.chain?.formatters,f=u?.transactionRequest?.format||A.formatTransactionRequest;return i.signTransaction?i.signTransaction({...a,chainId:s},{serializer:e.chain?.serializers?.transaction}):await e.request({method:"eth_signTransaction",params:[{...f(a),chainId:(0,m.numberToHex)(s),from:i.address}]},{retryCount:0})}e.s(["signTransaction",()=>C],866797);var I=e.i(643506);async function S(e,t){let{account:r=e.account,domain:n,message:a,primaryType:i}=t;if(!r)throw new c.AccountNotFoundError({docsPath:"/docs/actions/wallet/signTypedData"});let s=(0,o.parseAccount)(r),u={EIP712Domain:(0,I.getTypesForEIP712Domain)({domain:n}),...t.types};if((0,I.validateTypedData)({domain:n,message:a,primaryType:i,types:u}),s.signTypedData)return s.signTypedData({domain:n,message:a,primaryType:i,types:u});let l=(0,I.serializeTypedData)({domain:n,message:a,primaryType:i,types:u});return e.request({method:"eth_signTypedData_v4",params:[s.address,l]},{retryCount:0})}async function P(e,{id:t}){await e.request({method:"wallet_switchEthereumChain",params:[{chainId:(0,m.numberToHex)(t)}]},{retryCount:0})}async function E(e,t){return await e.request({method:"wallet_watchAsset",params:t},{retryCount:0})}e.s(["signTypedData",()=>S],79467),e.s(["switchChain",()=>P],784248),e.s(["watchAsset",()=>E],439287)},938630,e=>{"use strict";var t=e.i(189991),r=e.i(611573),n=e.i(656679),a=e.i(807749),i=e.i(467125),s=e.i(888794);async function o(e,o){let{abi:c,account:u=e.account,address:l,args:d,dataSuffix:f,functionName:p,...h}=o;if(void 0===u)throw new r.AccountNotFoundError({docsPath:"/docs/contract/writeContract"});let y=u?(0,t.parseAccount)(u):null,g=(0,n.encodeFunctionData)({abi:c,args:d,functionName:p});try{return await (0,i.getAction)(e,s.sendTransaction,"sendTransaction")({data:`${g}${f?f.replace("0x",""):""}`,to:l,account:y,...h})}catch(e){throw(0,a.getContractError)(e,{abi:c,address:l,args:d,docsPath:"/docs/contract/writeContract",functionName:p,sender:y?.address})}}e.s(["writeContract",()=>o])},57159,414639,e=>{"use strict";var t=e.i(363625),r=e.i(975948),n=e.i(492975),a=e.i(996980),i=e.i(450689),s=e.i(916207),o=e.i(829897),c=e.i(368941),u=e.i(652946),l=e.i(288854),d=e.i(638291),f=e.i(888794),p=e.i(377018),h=e.i(599976),y=e.i(866797),g=e.i(79467),m=e.i(784248),w=e.i(439287),b=e.i(938630);function A(e){return{addChain:t=>(0,n.addChain)(e,t),deployContract:t=>(0,a.deployContract)(e,t),getAddresses:()=>(0,i.getAddresses)(e),getChainId:()=>(0,r.getChainId)(e),getPermissions:()=>(0,s.getPermissions)(e),prepareAuthorization:t=>(0,o.prepareAuthorization)(e,t),prepareTransactionRequest:t=>(0,c.prepareTransactionRequest)(e,t),requestAddresses:()=>(0,u.requestAddresses)(e),requestPermissions:t=>(0,l.requestPermissions)(e,t),sendRawTransaction:t=>(0,d.sendRawTransaction)(e,t),sendTransaction:t=>(0,f.sendTransaction)(e,t),signAuthorization:t=>(0,p.signAuthorization)(e,t),signMessage:t=>(0,h.signMessage)(e,t),signTransaction:t=>(0,y.signTransaction)(e,t),signTypedData:t=>(0,g.signTypedData)(e,t),switchChain:t=>(0,m.switchChain)(e,t),watchAsset:t=>(0,w.watchAsset)(e,t),writeContract:t=>(0,b.writeContract)(e,t)}}function T(e){let{key:r="wallet",name:n="Wallet Client",transport:a}=e;return(0,t.createClient)({...e,key:r,name:n,transport:a,type:"walletClient"}).extend(A)}e.s(["walletActions",()=>A],414639),e.s(["createWalletClient",()=>T],57159)},911347,307075,e=>{"use strict";var t=e.i(695331);function r(e,n={}){let{key:a="custom",methods:i,name:s="Custom Provider",retryDelay:o}=n;return({retryCount:r})=>(0,t.createTransport)({key:a,methods:i,name:s,request:e.request.bind(e),retryCount:n.retryCount??r,retryDelay:o,type:"custom"})}e.s(["custom",()=>r],911347);var n=e.i(853532),a=e.i(383856),i=e.i(588233);function s(e,r={}){let{key:n="fallback",name:a="Fallback",rank:c=!1,shouldThrow:u=o,retryCount:l,retryDelay:d}=r;return({chain:r,pollingInterval:s=4e3,timeout:o,...f})=>{let p=e,h=()=>{},y=(0,t.createTransport)({key:n,name:a,async request({method:e,params:t}){let n,a=async(i=0)=>{let s=p[i]({...f,chain:r,retryCount:0,timeout:o});try{let r=await s.request({method:e,params:t});return h({method:e,params:t,response:r,transport:s,status:"success"}),r}catch(o){if(h({error:o,method:e,params:t,transport:s,status:"error"}),u(o)||i===p.length-1||!(n??=p.slice(i+1).some(t=>{let{include:n,exclude:a}=t({chain:r}).config.methods||{};return n?n.includes(e):!a||!a.includes(e)})))throw o;return a(i+1)}};return a()},retryCount:l,retryDelay:d,type:"fallback"},{onResponse:e=>h=e,transports:p.map(e=>e({chain:r,retryCount:0}))});if(c){let e="object"==typeof c?c:{};!function({chain:e,interval:t=4e3,onTransports:r,ping:n,sampleCount:a=10,timeout:s=1e3,transports:o,weights:c={}}){let{stability:u=.7,latency:l=.3}=c,d=[],f=async()=>{let c=await Promise.all(o.map(async t=>{let r,a,i=t({chain:e,retryCount:0,timeout:s}),o=Date.now();try{await (n?n({transport:i}):i.request({method:"net_listening"})),a=1}catch{a=0}finally{r=Date.now()}return{latency:r-o,success:a}}));d.push(c),d.length>a&&d.shift();let p=Math.max(...d.map(e=>Math.max(...e.map(({latency:e})=>e))));r(o.map((e,t)=>{let r=d.map(e=>e[t].latency),n=r.reduce((e,t)=>e+t,0)/r.length,a=d.map(e=>e[t].success),i=a.reduce((e,t)=>e+t,0)/a.length;return 0===i?[0,t]:[l*(1-n/p)+u*i,t]}).sort((e,t)=>t[0]-e[0]).map(([,e])=>o[e])),await (0,i.wait)(t),f()};f()}({chain:r,interval:e.interval??s,onTransports:e=>p=e,ping:e.ping,sampleCount:e.sampleCount,timeout:e.timeout,transports:p,weights:e.weights})}return y}}function o(e){return!!("code"in e&&"number"==typeof e.code&&(e.code===a.TransactionRejectedRpcError.code||e.code===a.UserRejectedRequestError.code||n.ExecutionRevertedError.nodeMessage.test(e.message)||5e3===e.code))}e.s(["fallback",()=>s,"shouldThrow",()=>o],307075)}]);