(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,120683,528320,942479,430483,44276,5934,e=>{"use strict";var t=e.i(843476),l=e.i(672464),r=e.i(271645),a=e.i(741124),o=e.i(564012),s=e.i(828073),n=e.i(88653),i=e.i(846932),c=e.i(174080),d=e.i(309682),x=e.i(110163),p=e.i(831095),u=e.i(736837),m=e.i(746256),f=e.i(247317),h=e.i(778536),g=e.i(275195);let b=({value:e,onChange:r,onChangeComplete:a,formatLabel:o=e=>`${e}%`,points:s,disabled:n=!1,maxLeverage:i=100,minLeverage:c=0})=>{let d=(0,l.useAtomValue)(g.isMountedAtom),x=Math.floor(i),p=Math.floor(c),u=x-p,m=Math.min(Math.max(e,p),x),f=[p,...Array.from({length:3},(e,t)=>Math.round(p+(t+1)*u/4)),x],h=(m-p)/u*100,b=()=>{!n&&a&&a()};return(0,t.jsx)("div",{className:"flex flex-row w-full justify-start items-center px-[12px] pt-[12px] pb-[32px]",children:(0,t.jsx)("div",{className:"relative bg-primaryStroke flex flex-row flex-1 h-[2px] justify-between items-center rounded-[999px]",children:d&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:`absolute h-full rounded-[999px] ${d&&n?"bg-primaryStroke":"bg-primaryBlue"}`,style:{width:`${h}%`}}),(0,t.jsx)("input",{type:"range",min:"0",max:"100",value:h,onChange:e=>{n||r(Math.round(p+Number(e.target.value)/100*u))},onMouseUp:b,onTouchEnd:b,onTouchStart:e=>{if(n)return;let t=e.currentTarget.getBoundingClientRect();r(Math.round(p+Math.min(100,Math.max(0,(e.touches[0].clientX-t.left)/t.width*100))/100*u))},onTouchMove:e=>{if(n)return;let t=e.currentTarget.getBoundingClientRect();r(Math.round(p+Math.min(100,Math.max(0,(e.touches[0].clientX-t.left)/t.width*100))/100*u)),e.preventDefault()},className:`absolute w-[calc(100%--12px)] h-[44px] -top-[12px] right-[-8px] opacity-0 cursor-pointer peer ${n?"cursor-not-allowed":""}`,style:{touchAction:"none"},disabled:n}),(0,t.jsx)("div",{className:`absolute h-[12px] w-[12px] rounded-full top-1/2 pointer-events-none transition-[width,height] peer-hover:h-[16px] peer-hover:w-[16px] peer-active:h-[20px] peer-active:w-[20px] z-10 ${n?"bg-primaryStroke":"bg-primaryBlue"}`,style:{left:`${h}%`,transform:"translate(-50%, -50%)"}}),(s??f).map((l,r)=>(0,t.jsx)("div",{className:`relative h-[4px] w-[2px] rounded-full pointer-events-none ${e>=l?n?"bg-primaryStroke":"bg-primaryBlue":"bg-textTertiary"}`,children:(0,t.jsx)("span",{className:`absolute left-1/2 -translate-x-1/2 top-[11px] text-[10px] leading-[14px] font-normal select-none pointer-events-none ${n?"text-textTertiary":"text-textSecondary"}`,children:o(l)})},r))]})})})};e.s(["default",0,b],528320);var y=e.i(182781),w=e.i(657688),v=e.i(832544),N=e.i(879197),j=e.i(78390),A=e.i(711858);let k=(0,r.memo)(function({group:e,activeWalletCount:o,validWalletCount:s,isCollapsed:n,onToggleCollapse:i,onToggleActive:c,cumulativeBalance:d,uniqueHoldingsCount:x,chain:p="sol"}){let u=(0,l.useAtomValue)(v.isMobileAtom),m=s>0&&o===s,f=o>0&&o<s,h=(0,r.useCallback)(e=>{e.stopPropagation(),c()},[c]),g=(0,r.useCallback)(e=>{e.stopPropagation(),i()},[i]);return u?(0,t.jsxs)("div",{className:"relative flex flex-row items-center gap-[8px] px-[16px] py-[8px] bg-primaryStroke/20",onClick:g,children:[(0,t.jsxs)("button",{type:"button",onClick:h,className:"flex items-center justify-center w-[18px] h-[18px] rounded-[4px] border border-secondaryStroke bg-background transition-all flex-shrink-0",children:[m&&(0,t.jsx)("i",{className:"ri-check-line text-primaryBlue text-[14px]"}),f&&(0,t.jsx)("div",{className:"w-[8px] h-[2px] bg-primaryOrange rounded-full"})]}),(0,t.jsxs)("div",{className:"flex flex-row gap-[4px] w-full justify-between",children:[(0,t.jsxs)("div",{className:"flex flex-row items-center gap-[4px]",children:[(0,t.jsx)("div",{className:"flex items-center justify-center w-[20px] h-[20px] flex-shrink-0",children:(0,t.jsx)("i",{className:`${n?"ri-folder-3-line":"ri-folder-open-line"} text-[16px] text-primaryBlue`})}),(0,t.jsx)("span",{className:"text-textPrimary text-[13px] font-medium truncate min-w-0 max-w-[80px]",children:e.name})]}),(0,t.jsxs)("div",{className:"flex flex-row items-center gap-[4px]",children:[(0,t.jsxs)("div",{className:"flex flex-row items-center gap-[6px] flex-shrink-0",children:[void 0!==d&&(0,t.jsxs)("div",{className:"border border-primaryStroke/50 flex flex-row h-[22px] px-[5px] gap-[3px] items-center rounded-full",children:[(0,t.jsx)(w.default,{src:a.chainToInfoMap[p].icon,alt:a.chainToInfoMap[p].ticker,width:12,height:12}),(0,t.jsx)("span",{className:"text-textSecondary text-[11px] leading-[14px] font-normal",dangerouslySetInnerHTML:{__html:(0,N.getFormattedNumber)(d,4)}})]}),void 0!==x&&(0,t.jsxs)("div",{className:"border border-primaryStroke/50 flex flex-row h-[22px] px-[5px] gap-[3px] items-center rounded-full",children:[(0,t.jsxs)("div",{className:"relative flex flex-row justify-start items-center w-[18px] h-[10px]",children:[(0,t.jsx)("div",{className:"absolute left-[0px] bg-primaryStroke flex h-[10px] w-[10px] rounded-[3px] z-[3]"}),(0,t.jsx)("div",{className:"absolute left-[4px] bg-secondaryStroke flex h-[10px] w-[10px] rounded-[3px] z-[2]"}),(0,t.jsx)("div",{className:"absolute left-[8px] bg-textTertiary flex h-[10px] w-[10px] rounded-[3px] z-[1]"})]}),(0,t.jsx)("span",{className:"text-textSecondary text-[11px] leading-[14px] font-normal",children:x})]})]}),(0,t.jsxs)("div",{className:"flex flex-row items-center gap-[4px] flex-shrink-0",children:[(0,t.jsx)("span",{className:"text-textTertiary text-[11px]",children:o>0?`${o}/${s}`:s}),(0,t.jsx)("i",{className:`${n?"ri-arrow-down-s-line":"ri-arrow-up-s-line"} text-[14px] text-textTertiary transition-transform duration-150`})]})]})]})]}):(0,t.jsxs)("div",{className:"group hover:bg-secondaryStroke/10 flex flex-row justify-start items-center cursor-pointer",onClick:h,children:[(0,t.jsx)("div",{className:"flex flex-row gap-[0px] p-[16px] pr-[16px] items-start",children:(0,t.jsx)(j.Toggle,{isSelected:m,borderColor:f?"border-primaryBlue":"border-secondaryStroke",onClick:h,labelClickable:!1})}),(0,t.jsxs)("div",{className:"border-secondaryStroke/50 border-b-[1px] flex flex-1 flex-row h-[56px] gap-[0px] pl-[0px] justify-start items-center",children:[(0,t.jsxs)("div",{className:"flex flex-col flex-1 gap-[4px] justify-start items-start pr-[16px] min-w-[100px]",children:[(0,t.jsxs)("span",{className:"text-nowrap text-[14px] leading-[18px] font-medium flex items-center gap-[4px]",children:[(0,t.jsx)("button",{type:"button",onClick:g,className:"group/folder flex flex-row items-center justify-center w-[24px] h-[24px] rounded-[4px] hover:bg-primaryBlueHover/5 transition-colors duration-150",children:(0,t.jsx)("i",{className:`${n?"ri-folder-3-line":"ri-folder-open-line"} text-[16px] text-primaryBlue group-hover/folder:text-primaryBlueHover transition-all duration-150`})}),(0,t.jsx)("span",{className:"text-textPrimary truncate min-w-0 max-w-[100px]",children:e.name})]}),(0,t.jsx)("div",{className:"flex flex-row gap-[6px]",children:(0,t.jsxs)("span",{className:"text-textTertiary text-[12px] leading-[16px] font-medium",children:[s," ",1===s?"wallet":"wallets"]})})]}),(0,t.jsx)("div",{className:"flex flex-1 flex-row gap-[0px] pr-[0px] justify-end items-center",children:void 0!==d&&(0,t.jsx)(A.Tooltip,{content:`${a.chainToInfoMap[p].ticker} Balance`,position:"top",children:(0,t.jsxs)("div",{className:"border border-secondaryStroke/50 flex flex-row h-[26px] pl-[6px] pr-[6px] gap-[4px] justify-end items-center rounded-full",children:[(0,t.jsx)(w.default,{src:a.chainToInfoMap[p].icon,alt:a.chainToInfoMap[p].ticker,width:16,height:16}),(0,t.jsx)("span",{className:"text-textSecondary text-[12px] leading-[16px] font-normal",dangerouslySetInnerHTML:{__html:(0,N.getFormattedNumber)(d,4)}})]})})}),(0,t.jsx)("div",{className:"flex flex-1 flex-row pr-[16px] justify-end items-center gap-[0px]",children:void 0!==x&&(0,t.jsx)(A.Tooltip,{content:"Tokens",position:"top",children:(0,t.jsxs)("div",{className:"border border-secondaryStroke/50 flex flex-row h-[26px] pl-[7px] pr-[6px] gap-[4px] justify-end items-center rounded-full",children:[(0,t.jsxs)("div",{className:"relative flex flex-row justify-start items-center w-[26px] h-[13px]",children:[(0,t.jsx)("div",{className:"absolute left-[0px] bg-primaryStroke flex flex-row h-[13px] w-[13px] justify-center items-center rounded-[4px] z-[3]"}),(0,t.jsx)("div",{className:"absolute left-[6px] bg-secondaryStroke flex flex-row h-[13px] w-[13px] justify-center items-center rounded-[4px] z-[2]"}),(0,t.jsx)("div",{className:"absolute left-[12px] bg-textTertiary flex flex-row h-[13px] w-[13px] justify-center items-center rounded-[4px] z-[1]"})]}),(0,t.jsx)("span",{className:"text-textSecondary text-[12px] leading-[16px] font-normal",children:x})]})})})]})]})});e.s(["MobileWalletGroupHeader",0,k],942479);var S=e.i(375116),T=e.i(656679),_=e.i(764335);let C=({account:e,tokenAddress:t,to:l,amountRaw:r,nonce:a})=>{let o=(0,T.encodeFunctionData)({abi:_.ERC20_ABI,functionName:"transfer",args:[l,BigInt(r.toFixed(0))]});return{from:e.address,to:t,data:o,value:BigInt(0),gas:S.BNB_TRANSFER_GAS_CONFIG.tokenTransferGasLimit,gasPrice:S.BNB_TRANSFER_GAS_CONFIG.gasPrice,nonce:a,chainId:m.bsc.id}};e.s(["buildBnbTransferTx",0,({account:e,to:t,amountWei:l,nonce:r})=>({from:e.address,to:t,value:BigInt(l.toFixed(0)),gas:S.BNB_TRANSFER_GAS_CONFIG.bnbTransferGasLimit,gasPrice:S.BNB_TRANSFER_GAS_CONFIG.gasPrice,nonce:r,chainId:m.bsc.id}),"buildErc20TransferTx",0,C,"calculateGasCost",0,(e,t)=>(0,s.default)(e.toString()).multipliedBy(t.toString())],430483);var M=e.i(514276),$=e.i(562406),L=e.i(363071),E=e.i(592846),I=e.i(885438),K=e.i(970317),P=e.i(781754),B=e.i(458768),W=e.i(770703),R=e.i(682382),D=e.i(754825),G=e.i(651422);let X=(0,W.default)(()=>e.A(335657),{loadableGenerated:{modules:[92627]},ssr:!1}),V=(0,W.default)(()=>e.A(259254),{loadableGenerated:{modules:[581372]},ssr:!1}),F=(0,r.memo)(function({isSelected:e,walletName:o,walletAddress:s,solBalance:i,tokenCount:c,onRowClick:d=()=>{},onToggleClick:x,onAddressCopy:p,onTurboToggle:u,borderColor:m="border-secondaryStroke",tokenImage:f,tokenTicker:h,tokenAmount:g,isPrimary:b=!1,hideToggle:y=!1,isTurboEnabled:v=!1}){let{t:k}=(0,E.useTranslation)(),S=(0,l.useAtomValue)(a.currentChainAtom),[T,_]=(0,r.useState)(!1),[C,M]=(0,r.useState)(!1),$=(0,l.useAtomValue)(D.solNoncesAtom),L=(0,l.useAtomValue)(D.monitoredSolWalletsAtom),I=(0,r.useMemo)(()=>L.find(e=>e.publicKey===s),[L,s]),K=s.length>12?`${s.substring(0,5)}`:s,P=o.length>12?`${o.substring(0,12)}...`:o;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{onClick:d,className:`group hover:bg-secondaryStroke/10 flex flex-row justify-start items-center cursor-pointer ${o===R.VANISH_WALLET_NAME?"vanish-wallet":b?"primary-wallet":""}`,children:[!y&&(0,t.jsx)("div",{className:"flex flex-row gap-[0px] p-[16px] pr-[16px] items-start",children:(0,t.jsx)(j.Toggle,{isSelected:e,borderColor:m,onClick:e=>{e.stopPropagation(),x&&x()},activeColor:o===R.VANISH_WALLET_NAME?"bg-vanish":b?"bg-[rgb(247,147,26)]":void 0,activeBorderColor:o===R.VANISH_WALLET_NAME?"border-vanish":b?"border-[rgb(247,147,26)]":void 0,className:o===R.VANISH_WALLET_NAME?"vanish-toggle":b?"primary-toggle":""})}),(0,t.jsxs)("div",{className:`border-secondaryStroke/50 border-b-[1px] flex flex-1 flex-row h-[56px] gap-[0px] ${y?"pl-[16px]":"pl-[0px]"} justify-start items-center`,children:[(0,t.jsxs)("div",{className:"flex flex-col flex-1 gap-[4px] justify-start items-start pr-[16px] min-w-[100px]",children:[(0,t.jsxs)("span",{className:`${o===R.VANISH_WALLET_NAME?"text-vanish":b?"text-[rgb(247,147,26)]":"text-textPrimary"} text-nowrap text-[14px] leading-[18px] font-medium flex items-center gap-[4px]`,children:[o===R.VANISH_WALLET_NAME&&(0,t.jsx)("div",{className:"flex flex-row w-[20px] h-[20px] justify-center items-center -mr-[2px]",children:(0,t.jsx)(w.default,{src:"/images/vanish.svg",alt:"Vanish",width:20,height:20})}),P]}),(0,t.jsxs)("div",{className:"flex flex-row gap-[6px]",children:[s!==R.VANISH_WALLET_ADDRESS&&u&&(0,t.jsx)(A.Tooltip,{content:v?k("Disable Turbo"):k("Enable Turbo"),position:"bottom",children:(0,t.jsxs)("button",{onClick:e=>{e.stopPropagation(),u&&(v||$.has(s)&&$.get(s)?.length!==0?u():_(!0))},className:`${v?"bg-primaryBlue/5 text-primaryBlue hover:bg-primaryBlue/10 hover:text-primaryBlueHover transition-colors duration-[125ms] ease-in-out":"text-textTertiary hover:text-textSecondary transition-colors duration-[125ms] ease-in-out"} group h-[16px] flex flex-row gap-[3px] pl-[4px] pr-[5px] transition-colors duration-[125ms] ease-in-out cursor-pointer justify-start items-center rounded-full`,children:[(0,t.jsx)("i",{className:"icon-rocket",style:{fontSize:"11px"}}),(0,t.jsx)("span",{className:"text-nowrap text-[11px] font-medium",children:v?k("Turbo"):k("Off")})]})}),s!==R.VANISH_WALLET_ADDRESS&&(0,t.jsxs)("button",{onClick:e=>{e.stopPropagation(),p?p():(navigator.clipboard.writeText(s),B.default.success({message:k("Address copied to clipboard"),icon:(0,t.jsx)("i",{className:"ri-clipboard-line text-primaryBlue text-[16px]"})},{duration:1500}))},className:"text-textTertiary hover:text-textSecondary flex flex-row gap-[4px] transition-colors duration-[125ms] ease-in-out cursor-pointer",children:[(0,t.jsx)("span",{className:"text-[12px] leading-[16px] font-medium",children:K}),(0,t.jsx)("i",{className:"ri-file-copy-line text-[12px] leading-[16px] font-medium"})]}),s===R.VANISH_WALLET_ADDRESS&&(0,t.jsxs)("div",{onClick:e=>{e.stopPropagation(),M(!0)},className:"bg-vanish/5 flex items-center gap-[3px] h-[16px] pl-[4px] pr-[5px] rounded-full cursor-pointer hover:bg-vanish/10 transition-colors duration-125 ease-in-out",children:[(0,t.jsx)("i",{className:"ri-eye-off-line text-vanish text-[11px]"}),(0,t.jsx)("span",{className:"text-vanish text-[11px] font-medium",children:k("Private")})]})]})]}),(0,t.jsx)("div",{className:"flex flex-1 flex-row gap-[0px] pr-[0px] justify-end items-center",children:(0,t.jsx)(A.Tooltip,{content:k(`${a.chainToInfoMap[S].ticker} Balance`),position:"top",children:(0,t.jsxs)("div",{className:"border border-secondaryStroke/50 flex flex-row h-[26px] pl-[6px] pr-[6px] gap-[4px] justify-end items-center rounded-full",children:[(0,t.jsx)(w.default,{src:a.chainToInfoMap[S].icon,alt:a.chainToInfoMap[S].ticker,width:16,height:16}),(0,t.jsx)("span",{className:"text-textSecondary text-[12px] leading-[16px] font-normal",dangerouslySetInnerHTML:{__html:(0,N.getFormattedNumber)(i,4)}})]})})}),(0,t.jsx)("div",{className:"flex flex-1 flex-row pr-[16px] justify-end items-center gap-[0px]",children:(0,t.jsx)(A.Tooltip,{content:k("Tokens"),position:"top",children:(0,t.jsx)("div",{className:"border border-secondaryStroke/50 flex flex-row h-[26px] pl-[7px] pr-[6px] gap-[4px] justify-end items-center rounded-full",children:g?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"relative flex flex-row justify-start items-center w-[13px] h-[13px]",children:(0,t.jsx)("div",{className:"absolute left-[0px] flex flex-row h-[13px] w-[13px] justify-center items-center rounded-[4px] z-[3] overflow-hidden",children:(0,t.jsx)(G.default,{src:f??null,tokenTicker:h,alt:"Token",width:13,height:13,className:"object-cover"})})}),(0,t.jsx)("span",{className:"text-textSecondary text-[12px] leading-[16px] font-normal",dangerouslySetInnerHTML:{__html:(0,N.getFormattedNumber)(g??0,4)}})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"relative flex flex-row justify-start items-center w-[26px] h-[13px]",children:[(0,t.jsx)("div",{className:"absolute left-[0px] bg-primaryStroke flex flex-row h-[13px] w-[13px] justify-center items-center rounded-[4px] z-[3]"}),(0,t.jsx)("div",{className:"absolute left-[6px] bg-secondaryStroke flex flex-row h-[13px] w-[13px] justify-center items-center rounded-[4px] z-[2]"}),(0,t.jsx)("div",{className:"absolute left-[12px] bg-textTertiary flex flex-row h-[13px] w-[13px] justify-center items-center rounded-[4px] z-[1]"})]}),(0,t.jsx)("span",{className:"text-textSecondary text-[12px] leading-[16px] font-normal",dangerouslySetInnerHTML:{__html:c.toString()}})]})})})})]})]}),(0,t.jsx)(n.AnimatePresence,{children:C&&(0,t.jsx)(V,{onClose:()=>M(!1)})}),(0,t.jsx)(n.AnimatePresence,{children:T&&(0,t.jsx)(X,{onClose:()=>_(!1),walletAddress:s,privateKey:I?.privateKey??""})})]})});e.s(["default",0,F],44276);var H=e.i(447800),O=e.i(354640);let z=(0,r.memo)(function({viewType:e="global",layout:a="dropdown",tokenInfo:o}){let{t:n}=(0,E.useTranslation)(),i=(0,l.useAtomValue)(v.isMobileAtom),c=(0,l.useSetAtom)(h.portfolioTabAtom),g=(0,l.useAtomValue)(I.evmTokenAccountsAtom),{uiLocked:b,isLocked:w,lock:N,unlock:j}=(0,L.default)(),T=(0,l.useAtomValue)(I.fullEvmWalletsAtom),_=(0,l.useAtomValue)(I.allEvmWalletsAtom),W=(0,l.useAtomValue)(I.evmBalancesAtom),R=(0,r.useMemo)(()=>new Set(_.filter(e=>!e.isArchived).map(e=>e.walletAddress)),[_]),D=(0,l.useAtomValue)(I.selectedEvmWalletsAtom),G=(0,l.useSetAtom)(I.selectedEvmWalletsAtom),X=(0,I.useGetAndIncrementNonce)(),V=(0,I.useRefreshBnbNonces)(),z=(0,K.useBnbCancelPendingTx)(),[Z,q]=(0,r.useState)(!1),[J,Q]=(0,y.useSettings)("evmWalletsAndGroups",[]),Y=(0,r.useMemo)(()=>(function(e){let t=[];for(let l of e)if("wallet"===l.type)t.push({type:"wallet",address:l.address});else if(t.push({type:"group-header",group:l.group}),!l.group.isCollapsed)for(let e of l.group.wallets)t.push({type:"wallet",address:e,groupId:l.group.groupId});return t})(J),[J]),ee=(0,r.useCallback)(e=>{Q(J.map(t=>"group"===t.type&&t.group.groupId===e?{...t,group:{...t.group,isCollapsed:!t.group.isCollapsed}}:t))},[J,Q]),et=(0,r.useCallback)(e=>{let t=J.find(t=>"group"===t.type&&t.group.groupId===e);if(!t||"group"!==t.type)return;let l=t.group.wallets.filter(e=>R.has(e));if(0===l.length)return void B.default.error(n("All wallets in this group are archived"));if(l.filter(e=>D.includes(e)).length>0)G(D.filter(e=>!l.includes(e)));else{let e=l.filter(e=>!D.includes(e)),t=H.MAX_TRADING_WALLETS-D.length,r=e.slice(0,t);if(0===r.length)return void B.default.error(n(`Maximum of ${H.MAX_TRADING_WALLETS} wallets can be active`));r.length<e.length&&B.default.warn(n(`Maximum of ${H.MAX_TRADING_WALLETS} wallets can be active. Only ${r.length} of ${e.length} wallets activated`)),G([...D,...r])}},[J,R,D,G,n]),el=(0,r.useCallback)(e=>{let t=e.wallets.filter(e=>R.has(e)),l=t.filter(e=>D.includes(e)).length,r=0;for(let e of t)r+=parseFloat(W.data.get(e.toLowerCase())?.balanceWei??"0")/1e18;let a=new Set;for(let e of t){let t=g.data.get(e.toLowerCase());if(t)for(let[e,l]of t.entries())l.balanceRaw&&BigInt(l.balanceRaw)>BigInt(0)&&a.add(e)}return{activeCount:l,validCount:t.length,cumulativeBalance:r,uniqueHoldingsCount:a.size}},[R,D,W,g]),er=(0,r.useMemo)(()=>new Map(T.map(e=>[e.publicKey,e])),[T]),ea=(0,r.useMemo)(()=>{let e=new Map((function(e){let t=[];for(let l of e)"wallet"===l.type?t.push(l.address):t.push(...l.group.wallets);return t})(J).map((e,t)=>[e,t]));return[...T].sort((t,l)=>(e.get(t.publicKey)??Number.MAX_SAFE_INTEGER)-(e.get(l.publicKey)??Number.MAX_SAFE_INTEGER))},[T,J]),eo=(0,r.useMemo)(()=>o?ea.filter(e=>(0,I.findEvmTokenBalance)(g,e.publicKey,o.tokenAddress,o.tokenDecimals)>0):[],[ea,g,o]),es=(0,r.useMemo)(()=>o?ea.filter(e=>!eo.includes(e)):ea,[ea,eo,o]),en=(0,l.useAtomValue)(I.activeEvmWalletsAtom),ei=(0,l.useAtomValue)(I.fetchedEvmWalletsSetAtom),ec=(0,O.useRefreshBalancesEvm)(),ed=(0,r.useCallback)(e=>{G(t=>t.includes(e)?t.filter(t=>t!==e):t.length>=H.MAX_TRADING_WALLETS?(B.default.error(n(`Maximum of ${H.MAX_TRADING_WALLETS} trading wallets can be selected`)),t):(en.size>=H.MAX_TRADING_WALLETS&&!ei.has(e)&&(ec([e]),ei.add(e)),[...t,e]))},[G,en.size,n,ei,ec]),ex=(0,r.useCallback)(async()=>{if(!o)return void B.default.error(n("No token info"));if((0,$.isNonTransferrableProtocol)(o.protocol))return void B.default.error(n("Pre-migration tokens are non-transferrable"));if(D.length>1)return void B.default.error(n("Please select only one wallet"));if(0===D.length)return void B.default.error(n("Please select one wallet"));let e=D[0],t=eo.filter(t=>t.publicKey.toLowerCase()!==e.toLowerCase()&&t.privateKey).map(e=>{let t=(0,I.findEvmTokenBalanceRaw)(g,e.publicKey,o.tokenAddress),l=e.privateKey??"";return{publicKey:e.publicKey,privateKey:l,balance:t?(0,s.BigNumber)(t):(0,s.BigNumber)(0)}}).filter(e=>e.balance.gt(0)&&e.privateKey).sort((e,t)=>t.balance.gt(e.balance)?1:-1);if(0===t.length)return void B.default.error(n("No other wallets with token to consolidate from"));let l=B.default.loading(n("Consolidating tokens..."),{duration:1/0});try{if(w())return void B.default.error(n("Please wait for the consolidation to complete"));N();let r=(0,d.createPublicClient)({chain:m.bsc,transport:(0,x.http)(S.BNB_FRONTEND_RPC)}),a=[],s=[],i=[],c=[];for(let l of t)try{if(!l.privateKey)continue;let t=(0,u.privateKeyToAccount)(`0x${l.privateKey}`);if(l.balance.lte(0))continue;let n=await X(t.address,r),d=C({account:t,tokenAddress:o.tokenAddress,to:e,amountRaw:l.balance,nonce:n}),x=await t.signTransaction(d),m=(0,p.keccak256)(x);(0,M.sendBscTransaction)(x,!1),z(t.address,l.privateKey,n,S.BNB_TRANSFER_GAS_CONFIG.gasPrice),a.push(m),c.push((0,P.monitorTransaction)(r,null,m,500,12e3).then(()=>{s.push(m)}).catch(()=>{i.push(m)}))}catch(e){console.error(`Failed to transfer from ${l.publicKey}:`,e)}await Promise.all(c),await V([...t.map(e=>e.publicKey),e]),0===a.length?B.default.error(n("No balances to transfer"),{toastId:l}):i.length>0&&0===s.length?B.default.error(`${n("Consolidation failed")} (0/${a.length} ${n("succeeded")})`,{toastId:l}):i.length>0?B.default.error(`${n("Consolidation partially complete")} (${s.length}/${a.length} ${n("succeeded")})`,{toastId:l}):B.default.success(`${n("Consolidation complete!")} (${s.length} ${n("transactions")})`,{toastId:l})}catch(e){B.default.error(`${n("Error consolidating")}: ${(0,f.getErrorMessage)(e)}`,{toastId:l})}finally{j()}},[D,n,o,eo,g,w,N,j,X,V,z]),ep=(0,r.useCallback)(async()=>{if(!o)return void B.default.error(n("No token info"));if((0,$.isNonTransferrableProtocol)(o.protocol))return void B.default.error(n("Pre-migration tokens are non-transferrable"));if(D.length<2)return void B.default.error(n("Select at least 2 active wallets"));let e=(0,s.BigNumber)(0),t=new Map;for(let l of D){let r=(0,I.findEvmTokenBalanceRaw)(g,l,o.tokenAddress);if(!r)continue;let a=(0,s.BigNumber)(r);a.lte(0)||(e=e.plus(a),t.set(l,a))}if(e.lte(0))return void B.default.error(n("No token balance to split"));let l=B.default.loading(n("Splitting tokens..."));try{let r=(0,d.createPublicClient)({chain:m.bsc,transport:(0,x.http)(S.BNB_FRONTEND_RPC)}),a=e.dividedBy(D.length).integerValue(s.BigNumber.ROUND_DOWN),i=new Map;for(let e of D){let l=t.get(e),r=.4*Math.random()-.2,o=a.multipliedBy(1+r).integerValue(s.BigNumber.ROUND_DOWN);if(l){let r=l.minus(o);r.gte(0)?t.set(e,r):(t.delete(e),i.set(e,r.abs()))}else i.set(e,o)}let c=Array.from(t.entries()).sort((e,t)=>t[1].gt(e[1])?1:-1),f=Array.from(i.entries()).sort((e,t)=>t[1].gt(e[1])?1:-1),h=[],g=[],b=[],y=[],w=0,v=0;for(;w<c.length&&v<f.length;){let[e,t]=c[w],[l,a]=f[v],s=t.lt(a)?t:a,n=ea.find(t=>t.publicKey.toLowerCase()===e.toLowerCase())?.privateKey;if(!n){w++;continue}let i=(0,u.privateKeyToAccount)(`0x${n}`),d=await X(i.address,r),x=C({account:i,tokenAddress:o.tokenAddress,to:l,amountRaw:s,nonce:d}),m=await i.signTransaction(x),N=(0,p.keccak256)(m);(0,M.sendBscTransaction)(m,!1),0===h.length&&z(i.address,n,d,S.BNB_TRANSFER_GAS_CONFIG.gasPrice),h.push(N),y.push((0,P.monitorTransaction)(r,null,N,500,12e3).then(()=>{g.push(N)}).catch(()=>{b.push(N)})),c[w][1]=t.minus(s),f[v][1]=a.minus(s),c[w][1].lte(0)&&w++,f[v][1].lte(0)&&v++}await Promise.all(y),await V(D),0===h.length?B.default.error(n("No transfers needed"),{toastId:l}):b.length>0&&0===g.length?B.default.error(`${n("Split failed")} (0/${h.length} ${n("transactions succeeded")})`,{toastId:l}):b.length>0?B.default.error(`${n("Split partially complete")} (${g.length}/${h.length} ${n("transactions succeeded")})`,{toastId:l}):B.default.success(`${n("Split complete!")} (${g.length} ${n("transactions")})`,{toastId:l})}catch(e){B.default.error(`${n("Error splitting tokens")}: ${(0,f.getErrorMessage)(e)}`,{toastId:l})}},[D,n,o,g,ea,X,V,z]),eu="dropdown"===a?`flex flex-col gap-[16px] ${i?"w-full":"w-[348px]"}`:"flex flex-col gap-[16px] h-full w-full",em="dropdown"===a?"border-secondaryStroke":"border-white/10",ef=e=>"dropdown"===a?`group text-textPrimary flex flex-row gap-[4px] text-[12px] leading-[16px] font-medium justify-start items-center rounded-full px-[7px] h-[24px] disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-transparent
        ${e?"border-secondaryStroke border-[1px] bg-secondaryStroke/60 hover:bg-secondaryStroke/90":"hover:border-transparent border-[1px] bg-secondaryStroke/30 border-secondaryStroke/20 hover:bg-secondaryStroke/60"} transition-colors duration-125 ease-in-out`:"bg-textPrimary/[0.05] hover:bg-textPrimary/[0.1] hover:transition-colors hover:ease-in-out hover:duration-150 flex flex-row px-[8px] h-[24px] min-h-[24px] justify-center items-center gap-[3px] rounded-full ml-[4px]",eh=()=>"dropdown"===a?i?"flex-1":"max-h-[252px] overflow-y-auto":eo.length>0?"max-h-[calc(50vh-150px)]":"h-0",eg=(0,r.useMemo)(()=>{let e=D.filter(e=>eo.map(e=>e.publicKey).includes(e));return e.length===eo.length||!!e&&D.length===H.MAX_TRADING_WALLETS},[D,eo]),eb=(0,r.useMemo)(()=>D.filter(e=>!eo.map(e=>e.publicKey).includes(e)),[D,eo]),ey=(0,r.useCallback)(()=>{eg?G(eb):G(()=>{let e=eo.map(e=>e.publicKey).filter(e=>!eb.includes(e)),t=Math.max(0,H.MAX_TRADING_WALLETS-eb.length),l=eb.concat(e.slice(0,t));if(eb.length+e.length>H.MAX_TRADING_WALLETS&&B.default.error(n(`Maximum of ${H.MAX_TRADING_WALLETS} trading wallets can be selected`)),en.size>=H.MAX_TRADING_WALLETS){let e=l.filter(e=>!ei.has(e));e.length>0&&(ec(e),e.forEach(e=>{ei.add(e)}))}return l})},[eg,eb,eo,G,n,ec,ei,en]),ew=(0,r.useMemo)(()=>{let e=D.filter(e=>es.map(e=>e.publicKey).includes(e));return e.length===es.length||!!e.length&&D.length===H.MAX_TRADING_WALLETS},[D,es]),ev=(0,r.useMemo)(()=>D.filter(e=>eo.map(e=>e.publicKey).includes(e)),[D,eo]),eN=(0,r.useCallback)(()=>{ew?G(ev):G(()=>{let e=es.map(e=>e.publicKey).filter(e=>!ev.includes(e)),t=Math.max(0,H.MAX_TRADING_WALLETS-ev.length),l=ev.concat(e.slice(0,t));if(ev.length+e.length>H.MAX_TRADING_WALLETS&&B.default.error(n(`Maximum of ${H.MAX_TRADING_WALLETS} trading wallets can be selected`)),en.size>=H.MAX_TRADING_WALLETS){let e=l.filter(e=>!ei.has(e));e.length>0&&(ec(e),e.forEach(e=>{ei.add(e)}))}return l})},[ew,ev,es,G,n,ec,ei,en]),ej=(0,r.useMemo)(()=>{let e=[];for(let t of en){let l=W.data.get(t.toLowerCase())?.balanceWei;l&&parseFloat(l)>0&&e.push(t)}return 0===e.length||e.every(e=>D.includes(e))},[en,W,D]),eA=(0,r.useCallback)(()=>{let e=[];for(let t of en){let l=W.data.get(t.toLowerCase())?.balanceWei;if(l&&parseFloat(l)>0){if(e.length>=H.MAX_TRADING_WALLETS){B.default.error(n(`Maximum of ${H.MAX_TRADING_WALLETS} wallets can be selected`));break}e.push(t)}}G(e)},[n,en,W,G]);return(0,t.jsxs)("div",{className:eu,children:["global"===e?(0,t.jsxs)("div",{className:`flex flex-col ${"sidebar"===a?"h-full":""}`,children:[(0,t.jsx)("div",{className:"flex flex-col",children:(0,t.jsxs)("div",{className:`flex flex-row ${"dropdown"===a?"px-[16px]":"px-[12px]"} h-[44px] items-center justify-between`,children:[(0,t.jsx)("span",{className:"text-textSecondary text-[12px] font-normal",children:n("Wallets")}),(0,t.jsx)(A.Tooltip,{content:n("Multi Wallet Buy Settings"),children:(0,t.jsx)("button",{type:"button",className:"group flex items-center justify-center w-[24px] h-[24px] rounded-[4px] hover:bg-secondaryStroke/20 transition-colors duration-150 ease-in-out",onClick:()=>q(!0),children:(0,t.jsx)("i",{className:"ri-settings-3-line text-[13px] text-textTertiary group-hover:text-textSecondary transition-colors duration-150 ease-in-out"})})})]})}),(0,t.jsxs)("div",{className:`flex flex-col border-t ${em} ${"sidebar"===a?"flex-1 overflow-y-auto":""} ${"dropdown"===a?i?"flex-1":"max-h-[342px] overflow-y-auto":"max-h-[calc(100vh-200px)]"}`,children:[Y.map((e,l)=>{if("group-header"===e.type){let{activeCount:l,validCount:r,cumulativeBalance:a,uniqueHoldingsCount:o}=el(e.group);return(0,t.jsx)(k,{group:e.group,activeWalletCount:l,validWalletCount:r,isCollapsed:e.group.isCollapsed,onToggleCollapse:()=>ee(e.group.groupId),onToggleActive:()=>et(e.group.groupId),cumulativeBalance:a,uniqueHoldingsCount:o,chain:"bnb"},`group-${e.group.groupId}`)}let r=er.get(e.address);return r?(0,t.jsx)(F,{isSelected:D.includes(r.publicKey),walletName:r.name,walletAddress:r.publicKey,solBalance:(0,s.BigNumber)(W.data.get(r.publicKey.toLowerCase())?.balanceWei??"0").dividedBy(1e18).toNumber(),tokenCount:(0,I.countNonZeroEvmTokenBalances)(g,r.publicKey),tokenTicker:o?.tokenTicker??void 0,onRowClick:()=>ed(r.publicKey),onToggleClick:()=>ed(r.publicKey),borderColor:em,isPrimary:r.isPrimary,isTurboEnabled:!1},`${r.publicKey}-${l}`):null}),1===ea.length&&!i&&(0,t.jsxs)("button",{type:"button",onClick:()=>{c("wallets"),window.location.href="/portfolio"},className:"flex flex-row w-full h-[48px] px-[16px] gap-[16px] items-center hover:bg-primaryStroke/35 transition-colors duration-150 ease-in-out cursor-pointer",children:[(0,t.jsx)("i",{className:"ri-add-line text-[16px] text-textSecondary group-hover:text-textPrimary transition-colors duration-150 ease-in-out"}),(0,t.jsx)("span",{className:"text-textPrimary text-[14px] font-medium",children:n("Add Wallet")})]})]})]}):(0,t.jsxs)("div",{className:`flex flex-col ${"sidebar"===a?"h-full":""} gap-[16px] ${eo.length>0&&"sidebar"===a?"overflow-y-auto [&::-webkit-scrollbar]:hidden [-ms-overflow-style:none] [scrollbar-width:none]":""}`,children:[o&&eo.length>0&&(0,t.jsxs)("div",{className:`flex flex-col ${"sidebar"===a?"flex-1 max-h-[80%]":""}`,children:[(0,t.jsx)("div",{className:"flex flex-col",children:(0,t.jsxs)("div",{className:`flex flex-row gap-[4px] ${"dropdown"===a?"pl-[16px] pr-[12px]":"pl-[12px] pr-[12px]"} h-[44px] justify-between items-center`,children:[(0,t.jsx)(A.Tooltip,{content:eg?n(`Unselect all wallets with ${o.tokenTicker}`):n(`Select all wallets with ${o.tokenTicker}`),children:(0,t.jsx)("button",{type:"button",className:ef(eg),onClick:ey,children:(0,t.jsx)("span",{className:"text-textPrimary text-[12px] leading-[16px] font-medium",children:(es.length,`${eg?n("Unselect All"):n("Select All")}`)})})}),(0,t.jsxs)("div",{className:"flex flex-row gap-[8px] justify-start items-center",children:[(0,t.jsx)(A.Tooltip,{content:n("Moves all tokens to the selected wallet"),minWidth:"216px",children:(0,t.jsxs)("button",{type:"button",className:"group flex flex-row gap-[4px] text-textSecondary text-[12px] leading-[16px] font-medium justify-start items-center rounded-[4px] hover:bg-secondaryStroke/30 transition-colors duration-125 ease-in-out pl-[7px] pr-[6px] h-[24px] disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-transparent",onClick:ex,disabled:b,children:[(0,t.jsx)("i",{className:"ri-git-branch-line text-[14px] text-textTertiary group-hover:text-textSecondary group-disabled:hover:text-textTertiary transition-colors duration-125 ease-in-out"}),n("Consolidate")]})}),(0,t.jsx)(A.Tooltip,{content:n("Splits tokens evenly between active wallets with 20% variance"),minWidth:"216px",children:(0,t.jsxs)("button",{type:"button",className:"group flex flex-row gap-[4px] text-textSecondary text-[12px] leading-[16px] font-medium justify-start items-center rounded-[4px] hover:bg-secondaryStroke/30 transition-colors duration-125 ease-in-out pl-[7px] pr-[6px] h-[24px] disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-transparent",onClick:ep,children:[(0,t.jsx)("i",{className:"ri-git-merge-line text-[14px] text-textTertiary group-hover:text-textSecondary group-disabled:hover:text-textTertiary transition-colors duration-125 ease-in-out"}),n("Split Tokens")]})})]})]})}),(0,t.jsxs)("div",{className:`flex flex-col border-t ${em} ${"sidebar"===a?"flex-1 overflow-y-auto":""} ${eh()}`,children:[eo.map((e,l)=>(0,t.jsx)(F,{radial:!1,isSelected:D.includes(e.publicKey),walletName:e.name,walletAddress:e.publicKey,solBalance:parseFloat(W.data.get(e.publicKey.toLowerCase())?.balanceWei??"0")/1e18,tokenCount:(0,I.countNonZeroEvmTokenBalances)(g,e.publicKey),tokenTicker:o?.tokenTicker??void 0,onRowClick:()=>ed(e.publicKey),onToggleClick:()=>ed(e.publicKey),borderColor:em,tokenImage:o.tokenImage??void 0,tokenAmount:(0,I.findEvmTokenBalance)(g,e.publicKey,o.tokenAddress,o.tokenDecimals),isPrimary:e.isPrimary,isTurboEnabled:!1},`token-${e.publicKey}-${l}`)),1===ea.length&&!i&&(0,t.jsxs)("button",{type:"button",onClick:()=>{c("wallets"),window.location.href="/portfolio"},className:"flex flex-row w-full h-[48px] px-[16px] gap-[16px] items-center hover:bg-primaryStroke/35 transition-colors duration-150 ease-in-out cursor-pointer",children:[(0,t.jsx)("i",{className:"ri-add-line text-[16px] text-textSecondary group-hover:text-textPrimary transition-colors duration-150 ease-in-out"}),(0,t.jsx)("span",{className:"text-textPrimary text-[14px] font-medium",children:n("Add Wallet")})]})]})]}),o&&es.length>0&&(0,t.jsxs)("div",{className:`flex flex-col ${"sidebar"===a?`flex-1 ${eo.length>0?"max-h-[80%]":"h-full"}`:""}`,children:[(0,t.jsxs)("div",{className:"flex flex-row gap-[4px] px-[12px] py-[8px] justify-between items-center",children:[(0,t.jsxs)("div",{className:"flex flex-row gap-[8px] items-center",children:[(0,t.jsx)(A.Tooltip,{content:ew?n(`Unselect all wallets without ${o.tokenTicker}`):n(`Select all wallets without ${o.tokenTicker}`),children:(0,t.jsx)("button",{type:"button",className:ef(ew),onClick:eN,children:(0,t.jsx)("span",{className:"text-textPrimary text-[12px] leading-[16px] font-medium",children:(eo.length,`${ew?n("Unselect All"):n("Select All")}`)})})}),(0,t.jsx)(A.Tooltip,{content:n("Select all wallets with balance"),children:(0,t.jsx)("button",{type:"button",className:ej?"group text-textPrimary flex flex-row gap-[4px] text-[12px] leading-[16px] font-medium justify-start items-center rounded-full px-[7px] h-[24px] opacity-50 cursor-not-allowed border-[1px] bg-secondaryStroke/30 border-secondaryStroke/20 transition-colors duration-125 ease-in-out":ef(!1),onClick:eA,disabled:ej,children:(0,t.jsx)("span",{className:"text-textPrimary text-[12px] leading-[16px] font-medium",children:n("Select All with Balance")})})})]}),(0,t.jsx)(A.Tooltip,{content:n("Multi Wallet Buy Settings"),children:(0,t.jsx)("button",{type:"button",className:"group flex items-center justify-center w-[24px] h-[24px] rounded-[4px] hover:bg-secondaryStroke/20 transition-colors duration-150 ease-in-out",onClick:()=>q(!0),children:(0,t.jsx)("i",{className:"ri-settings-3-line text-[13px] text-textTertiary group-hover:text-textSecondary transition-colors duration-150 ease-in-out"})})})]}),(0,t.jsxs)("div",{className:`flex flex-col border-t ${em} ${"sidebar"===a?`flex-1 overflow-y-auto ${eo.length>0?"max-h-[calc(50vh-150px)]":"h-0"}`:""} ${eh()}`,children:[es.map((e,l)=>(0,t.jsx)(F,{radial:!1,isSelected:D.includes(e.publicKey),walletName:e.name,walletAddress:e.publicKey,solBalance:parseFloat(W.data.get(e.publicKey.toLowerCase())?.balanceWei??"0")/1e18,tokenCount:(0,I.countNonZeroEvmTokenBalances)(g,e.publicKey),tokenTicker:o?.tokenTicker??void 0,onToggleClick:()=>ed(e.publicKey),onRowClick:()=>ed(e.publicKey),borderColor:em,isPrimary:e.isPrimary,isTurboEnabled:!1},`no-token-${e.publicKey}-${l}`)),1===ea.length&&!i&&(0,t.jsxs)("button",{type:"button",onClick:()=>{c("wallets"),window.location.href="/portfolio"},className:"flex flex-row w-full h-[48px] px-[16px] gap-[16px] items-center hover:bg-primaryStroke/35 transition-colors duration-150 ease-in-out cursor-pointer",children:[(0,t.jsx)("i",{className:"ri-add-line text-[16px] text-textSecondary group-hover:text-textPrimary transition-colors duration-150 ease-in-out"}),(0,t.jsx)("span",{className:"text-textPrimary text-[14px] font-medium",children:n("Add Wallet")})]})]})]})]}),Z&&(0,t.jsx)(U,{onClose:()=>q(!1)})]})}),U=({onClose:e})=>{let{t:a}=(0,E.useTranslation)(),[o,s]=(0,l.useAtom)(I.buyVarianceBnbAtom),[d,x]=(0,l.useAtom)(I.transactionDelayMultiWalletBnbAtom),p=(0,r.useRef)(null),[u,m]=(0,r.useState)(!1),[f,h]=(0,r.useState)(!0),g=(0,r.useCallback)(()=>{h(!1),setTimeout(()=>{e()},200)},[e]);return f?(0,c.createPortal)((0,t.jsx)(n.AnimatePresence,{mode:"wait",children:(0,t.jsx)(i.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},className:"fixed inset-0 bg-[#090909]/40 flex items-center justify-center z-[99999]",onClick:e=>{e.stopPropagation(),u&&e.target===e.currentTarget&&g()},onMouseDown:e=>{e.stopPropagation(),e.target===e.currentTarget&&m(!0)},onMouseUp:e=>{e.stopPropagation(),requestAnimationFrame(()=>{m(!1)})},children:(0,t.jsx)(i.motion.div,{ref:p,className:"relative w-[452px] max-h-[880px]",initial:{opacity:0,y:0,scale:1},animate:{opacity:1,y:4,scale:1},exit:{opacity:0,y:0,scale:1},transition:{duration:.15,ease:"easeOut"},onClick:e=>e.stopPropagation(),children:(0,t.jsxs)("div",{className:"flex flex-col w-full h-full bg-backgroundTertiary border-[1px] border-secondaryStroke rounded-[4px] shadow-[0_4px_4px_0_rgba(0,0,0,0.30),0_8px_8px_0_rgba(0,0,0,0.45)]",children:[(0,t.jsxs)("div",{className:"flex flex-row w-full h-[44px] pl-[16px] pr-[12px] justify-between items-center border-b-[1px] border-b-secondaryStroke",children:[(0,t.jsx)("span",{className:"text-textPrimary text-[14px] leading-[20px] tracking-[-0.02em] font-medium",children:a("Multi Wallet Buy Settings")}),(0,t.jsx)("button",{type:"button",onClick:g,className:"group flex flex-row p-[4px] w-[24px] h-[24px] justify-center items-center hover:bg-secondaryStroke/20 rounded-[4px] transition-colors duration-150 ease-in-out",children:(0,t.jsx)("i",{className:"ri-close-line text-textSecondary text-[16px] group-hover:text-textPrimary"})})]}),(0,t.jsxs)("div",{className:"flex flex-col w-full px-[16px] py-[16px] pb-[20px] gap-[16px]",children:[(0,t.jsx)("div",{className:"flex flex-col gap-[8px]",children:(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-textSecondary text-[12px] leading-[16px] font-normal",children:a("Buy Variance")}),(0,t.jsxs)("div",{className:"w-[60px] h-[28px] flex items-center rounded-[4px] bg-transparent border border-secondaryStroke hover:border-textPrimary/10 focus:border-textPrimary/10 hover:bg-secondaryStroke/10 focus:bg-secondaryStroke/10 overflow-hidden",children:[(0,t.jsx)("input",{type:"text",value:o,onChange:e=>{let t=e.target.value.replace(/[^0-9]/g,"");(""===t||100>=parseInt(t))&&s(parseInt(t)||0)},onBlur:e=>{let t=parseInt(e.target.value)||0;t>100&&(t=100),t<0&&(t=0),s(t)},className:"bg-transparent text-textPrimary text-[12px] text-center w-[36px] outline-none"}),(0,t.jsx)("span",{className:"text-textSecondary text-[12px] mr-1",children:"%"})]})]}),(0,t.jsx)("div",{className:"flex flex-col gap-[4px] w-full justify-start items-center",children:(0,t.jsx)(b,{value:o,onChange:e=>s(e),points:[0,25,50,75,100],formatLabel:e=>`${e}%`,maxLeverage:100,disabled:!1})}),(0,t.jsx)("span",{className:"text-textTertiary text-[12px] leading-[16px] font-normal",children:a("The variance of the buy amount across the selected wallets. 0% to 100% randomly.")})]})}),(0,t.jsx)("div",{className:"flex flex-col gap-[8px]",children:(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-textSecondary text-[12px] leading-[16px] font-normal",children:a("Transaction Delay")}),(0,t.jsxs)("div",{className:"w-[60px] h-[28px] flex items-center rounded-[4px] bg-transparent border border-secondaryStroke hover:border-textPrimary/10 focus:border-textPrimary/10 hover:bg-secondaryStroke/10 focus:bg-secondaryStroke/10 overflow-hidden",children:[(0,t.jsx)("input",{type:"text",value:d,onChange:e=>{let t=e.target.value.replace(/[^0-9]/g,"");(""===t||1e3>=parseInt(t))&&x(parseInt(t)||0)},onBlur:e=>{let t=parseInt(e.target.value)||0;t>1e3&&(t=1e3),t<0&&(t=0),x(t)},className:"bg-transparent text-textPrimary text-[12px] text-center w-[36px] outline-none"}),(0,t.jsx)("span",{className:"text-textSecondary text-[12px] mr-1",children:"ms"})]})]}),(0,t.jsx)("div",{className:"flex flex-col gap-[4px] w-full justify-start items-center",children:(0,t.jsx)(b,{value:d,onChange:e=>x(e),points:[0,250,500,750,1e3],formatLabel:e=>1e3===e?"1s":`${e}ms`,maxLeverage:1e3,disabled:!1})}),(0,t.jsx)("span",{className:"text-textTertiary text-[12px] leading-[16px] font-normal",children:a("The delay between each transaction in milliseconds. 0ms means no delay.")})]})})]}),(0,t.jsx)("div",{className:"border-t border-secondaryStroke/50 flex flex-row w-full h-[68px] justify-end items-center p-[16px] pb-[20px]",children:(0,t.jsx)("button",{type:"button",onClick:g,className:"bg-primaryBlue flex flex-row flex-1 h-[32px] px-[12px] gap-[8px] justify-center items-center rounded-full hover:bg-primaryBlue/80 hover:brightness-110 transition-all duration-[150ms] cursor-pointer",children:(0,t.jsx)("span",{className:"text-[14px] font-bold text-background",children:a("Done")})})})]})})})}),document.body):null};var Z=e.i(467034),q=e.i(444610);e.i(559136);var J=e.i(107522),Q=e.i(127261),Y=e.i(422876);e.i(896198);var ee=e.i(717725),et=e.i(858010);let el=(0,q.struct)([(0,q.u8)("instruction"),(0,J.u64)("amount"),(0,q.u8)("decimals")]);function er(e,t,l,r,a,o,s=[],n=Y.TOKEN_PROGRAM_ID){let i=(0,ee.addSigners)([{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:l,isSigner:!1,isWritable:!0}],r,s),c=Z.Buffer.alloc(el.span);return el.encode({instruction:et.TokenInstruction.TransferChecked,amount:BigInt(a),decimals:o},c),new Q.TransactionInstruction({keys:i,programId:n,data:c})}e.s(["createTransferCheckedInstruction",()=>er],5934);var ea=e.i(659341),eo=e.i(103476),es=e.i(616318),en=e.i(85026),ei=e.i(401597),ec=e.i(973444);let ed=(0,r.memo)(function({viewType:e="global",layout:a="dropdown",tokenInfo:o}){let{t:s}=(0,E.useTranslation)(),n=(0,l.useAtomValue)(v.isMobileAtom),i=(0,l.useSetAtom)(h.portfolioTabAtom),c=(0,l.useAtomValue)(D.turboWalletsAtom),d=(0,l.useSetAtom)(D.turboWalletsAtom),x=(0,l.useAtomValue)(D.tokenAccountsAtom),{uiLocked:p,isLocked:u,lock:m,unlock:g}=(0,L.default)(),b=(0,l.useAtomValue)(D.activeSolWalletsAtom),w=(0,l.useAtomValue)(D.fetchedWalletsSetAtom),N=(0,O.useRefreshBalancesSol)(),j=(0,l.useAtomValue)(D.fullSolWallet),S=(0,l.useAtomValue)(D.allSolWalletsAtom),T=(0,l.useAtomValue)(D.solBalancesAtom),_=(0,r.useMemo)(()=>new Set(S.filter(e=>!e.isArchived).map(e=>e.walletAddress)),[S]),C=(0,l.useAtomValue)(D.selectedSolWalletsAtom),M=(0,l.useSetAtom)(D.selectedSolWalletsAtom),[$,I]=(0,r.useState)(!1),[K,P]=(0,y.useSettings)("solWalletsAndGroups",[]),W=(0,r.useMemo)(()=>(function(e){let t=[];for(let l of e)if("wallet"===l.type)t.push({type:"wallet",address:l.address});else if(t.push({type:"group-header",group:l.group}),!l.group.isCollapsed)for(let e of l.group.wallets)t.push({type:"wallet",address:e,groupId:l.group.groupId});return t})(K),[K]),G=(0,r.useCallback)(e=>{P(K.map(t=>"group"===t.type&&t.group.groupId===e?{...t,group:{...t.group,isCollapsed:!t.group.isCollapsed}}:t))},[K,P]),X=(0,r.useCallback)(e=>{let t=K.find(t=>"group"===t.type&&t.group.groupId===e);if(!t||"group"!==t.type)return;let l=t.group.wallets.filter(e=>_.has(e));if(0===l.length)return void B.default.error(s("All wallets in this group are archived"));if(l.filter(e=>C.includes(e)).length>0)M(C.filter(e=>!l.includes(e)));else{let e=l.filter(e=>!C.includes(e)),t=H.MAX_TRADING_WALLETS-C.length,r=e.slice(0,t);if(0===r.length)return void B.default.error(s(`Maximum of ${H.MAX_TRADING_WALLETS} wallets can be active`));r.length<e.length&&B.default.warn(s(`Maximum of ${H.MAX_TRADING_WALLETS} wallets can be active. Only ${r.length} of ${e.length} wallets activated`)),M([...C,...r])}},[K,_,C,M,s]),V=(0,r.useCallback)(e=>{let t=e.wallets.filter(e=>_.has(e)),l=t.filter(e=>C.includes(e)).length,r=0;for(let e of t)r+=T.data.get(e)?.balanceSol??0;let a=new Set;for(let e of t){let t=x.data.get(e);if(t)for(let[e,l]of t.entries())l.balanceRaw&&BigInt(l.balanceRaw)>BigInt(0)&&a.add(e)}return{activeCount:l,validCount:t.length,cumulativeBalance:r,uniqueHoldingsCount:a.size}},[_,C,T,x]),z=(0,r.useMemo)(()=>new Map(j.map(e=>[e.publicKey,e])),[j]),U=(0,r.useMemo)(()=>{let e=new Map((function(e){let t=[];for(let l of e)"wallet"===l.type?t.push(l.address):t.push(...l.group.wallets);return t})(K).map((e,t)=>[e,t]));return[...j].sort((t,l)=>(e.get(t.publicKey)??Number.MAX_SAFE_INTEGER)-(e.get(l.publicKey)??Number.MAX_SAFE_INTEGER))},[j,K]),Z=(0,r.useMemo)(()=>o?U.filter(e=>(0,D.findTokenBalance)(x,e.publicKey,o.tokenAddress,o.tokenDecimals)>0):[],[U,x,o]),q=(0,r.useMemo)(()=>o?U.filter(e=>!Z.includes(e)):U,[U,Z,o]),J=(0,r.useCallback)(e=>{M(t=>t.includes(e)?t.filter(t=>t!==e):t.length>=H.MAX_TRADING_WALLETS?(B.default.error(s(`Maximum of ${H.MAX_TRADING_WALLETS} trading wallets can be selected`)),t):(b.size>=H.MAX_TRADING_WALLETS&&!w.has(e)&&(N([e]),w.add(e)),[...t,e]))},[M,s,N,w,b]),Y=(0,r.useCallback)(e=>{d(t=>t.includes(e)?(B.default.success(s("Turbo mode disabled")),t.filter(t=>t!==e)):(B.default.success(s("Turbo mode enabled")),[...t,e]))},[d,s]),ee=(0,es.useGetSafeBlockhash)(),et=(0,r.useCallback)(async()=>{if(!o)return void B.default.error(s("No token info"));if(C.length>1)return void B.default.error(s("Please select only one wallet"));if(0===C.length)return void B.default.error(s("Please select one wallet"));if(C[0]===R.VANISH_WALLET_ADDRESS)return void B.default.error(s("Vanish wallets cannot be used in a consolidation"));let e=new Q.PublicKey(C[0]),t=x.data.get(e.toBase58())?.get(o.tokenAddress);if(!t)return void B.default.error(s("No token account found"));let l=t.tokenProgram,r=Z.filter(t=>t.publicKey!==e.toBase58()&&t.privateKey).map(e=>{let t=x.data.get(e.publicKey)?.get(o.tokenAddress),l=t?(0,ec.newSafeBN)(t.balanceRaw):(0,ec.newSafeBN)(0),r=e.privateKey??"";return{publicKey:e.publicKey,privateKey:r,tokenAccountAddress:t?.tokenAccountAddress,balance:l}}).filter(e=>e.balance.gt((0,ec.newSafeBN)(0))&&e.privateKey).sort((e,t)=>t.balance.cmp(e.balance));if(r.find(e=>e.publicKey===R.VANISH_WALLET_ADDRESS)&&(B.default.warn(s("Vanish wallets cannot be used in a consolidation")),r=r.filter(e=>e.publicKey!==R.VANISH_WALLET_ADDRESS)),0===r.length)return void B.default.error(s("No other wallets with token to consolidate from"));let a=B.default.loading(s("Consolidating tokens..."),{duration:1/0});try{if(u())return void B.default.error(s("Please wait for the consolidation to complete"));m();let t=await ee();if(!t)throw Error(s("Failed to get blockhash"));let n=[],i=!1,c="";for(let a=0;a<r.length;a+=5){let s=r.slice(a,a+5),d=Q.Keypair.fromSecretKey(eo.default.decode(s[0].privateKey)),x=[],p=[];if(!i){let{ataInstruction:t,ataAddress:r}=(0,en.makeCreateATAInstruction)(e,o.tokenAddress,l,d.publicKey);x.push(t),c=r,i=!0}for(let{publicKey:e,privateKey:t,tokenAccountAddress:r,balance:a}of s)r&&(x.push(er(new Q.PublicKey(r),new Q.PublicKey(o.tokenAddress),new Q.PublicKey(c),new Q.PublicKey(e),BigInt(a.toString()),o.tokenDecimals,void 0,new Q.PublicKey(l))),p.push(Q.Keypair.fromSecretKey(eo.default.decode(t))));if(0===x.length||i&&1===x.length)continue;(0,en.addPriorityFeeInstructions)({instructions:x,computeUnits:45e3+5e3*(x.length-!!i),microLamports:25e5});let{base64Tx:u}=await (0,en.compileTransaction)({signer:[d,...p],instructions:x,blockhash:t,lookupTables:en.AXIOM_ADDRESS_LOOKUP_TABLES_V2});n.push(u)}let{numFailed:d,errorMessages:x}=await (0,en.sendAndMonitorSimpleTxBatched)(n);d>0?B.default.error(`Error consolidating (${d}/${n.length}): ${x.join(", ")}`,{toastId:a}):B.default.success(s("Consolidation complete!"),{toastId:a})}catch(e){B.default.error(`${s("Error consolidating")}: ${(0,f.getErrorMessage)(e)}`,{toastId:a})}finally{g()}},[C,s,x,o,Z,ee,u,m,g]),el=(0,r.useCallback)(async()=>{if(!o)return void B.default.error(s("No token info"));if(C.length<2)return void B.default.error(s("Select at least 2 active wallets"));if(C.find(e=>e===R.VANISH_WALLET_ADDRESS))return void B.default.error(s("Vanish wallets cannot be used in a split"));let e=new ea.default(0),t=new Map,l="";for(let r of C){let a=x.data.get(r)?.get(o.tokenAddress);if(!a)continue;l=a.tokenProgram;let s=new ea.default(a.balanceRaw);s.isZero()||(e=e.add(s),t.set(r,s))}if(e.isZero())return void B.default.error(s("No token balance to split"));let r=B.default.loading(s("Splitting tokens..."));try{let a=await ee();if(!a)throw Error(s("Blockhash could not be found"));let n=(0,ei.distributeAmountBN)(e,C.length,20),i=new Map;for(let e=0;e<C.length;e++){let l=C[e],r=n[e],a=t.get(l);if(a){let e=a.sub(r);e.gte(new ea.default(0))?t.set(l,e):(t.delete(l),i.set(l,e.abs()))}else i.set(l,r)}let c=Array.from(t.entries()).sort((e,t)=>t[1].cmp(e[1])),d=Array.from(i.entries()).sort((e,t)=>t[1].cmp(e[1])),p=[],u=0,m=0;for(;u<c.length&&m<d.length;){let[e,t]=c[u],[r,n]=d[m],i=t.lt(n)?t:n,f=U.find(t=>t.publicKey===e)?.privateKey;if(!f)throw Error(s("No details found for wallet"));let h=x.data.get(e)?.get(o.tokenAddress);if(!h)throw Error(s("No token account found"));let g=Q.Keypair.fromSecretKey(eo.default.decode(f)),b=[],y=(0,en.makeCreateATAInstruction)(new Q.PublicKey(r),o.tokenAddress,l,new Q.PublicKey(e));b.push(y.ataInstruction);let w=er(new Q.PublicKey(h.tokenAccountAddress),new Q.PublicKey(o.tokenAddress),new Q.PublicKey(y.ataAddress),new Q.PublicKey(e),BigInt(i.toString()),o.tokenDecimals,void 0,new Q.PublicKey(l));b.push(w),(0,en.addPriorityFeeInstructions)({instructions:b,computeUnits:5e4,microLamports:25e5});let{base64Tx:v}=await (0,en.compileTransaction)({signer:g,instructions:b,blockhash:a});p.push(v),c[u][1]=t.sub(i),d[m][1]=n.sub(i),c[u][1].isZero()&&u++,d[m][1].isZero()&&m++}let{numFailed:f,errorMessages:h}=await (0,en.sendAndMonitorSimpleTxBatched)(p);f>0?B.default.error(`Error splitting tokens (${f}/${p.length}): ${h.join(", ")}`,{toastId:r}):B.default.success(s("Split complete!"),{toastId:r})}catch(e){B.default.error(s("Error splitting tokens: ")+(0,f.getErrorMessage)(e),{toastId:r})}},[C,s,x,o,U,ee]),ed=(0,r.useMemo)(()=>{let e=C.filter(e=>Z.map(e=>e.publicKey).includes(e)).length;return e===Z.length||!!e&&C.length===H.MAX_TRADING_WALLETS},[C,Z]),ep=(0,r.useMemo)(()=>C.filter(e=>!Z.map(e=>e.publicKey).includes(e)),[C,Z]),eu=(0,r.useCallback)(()=>{ed?M(ep):M(()=>{let e=Z.map(e=>e.publicKey).filter(e=>!ep.includes(e)),t=Math.max(0,H.MAX_TRADING_WALLETS-ep.length),l=ep.concat(e.slice(0,t));if(ep.length+e.length>H.MAX_TRADING_WALLETS&&B.default.error(s(`Maximum of ${H.MAX_TRADING_WALLETS} trading wallets can be selected`)),b.size>=H.MAX_TRADING_WALLETS){let e=l.filter(e=>!w.has(e));e.length>0&&(N(e),e.forEach(e=>{w.add(e)}))}return l})},[ed,ep,Z,M,s,N,w,b]),em=(0,r.useMemo)(()=>{let e=C.filter(e=>q.map(e=>e.publicKey).includes(e));return e.length===q.length||!!e.length&&C.length===H.MAX_TRADING_WALLETS},[C,q]),ef=(0,r.useMemo)(()=>C.filter(e=>Z.map(e=>e.publicKey).includes(e)),[C,Z]),eh=(0,r.useCallback)(()=>{em?M(ef):M(()=>{let e=q.map(e=>e.publicKey).filter(e=>!ef.includes(e)),t=Math.max(0,H.MAX_TRADING_WALLETS-ef.length),l=ef.concat(e.slice(0,t));if(ef.length+e.length>H.MAX_TRADING_WALLETS&&B.default.error(s(`Maximum of ${H.MAX_TRADING_WALLETS} trading wallets can be selected`)),b.size>=H.MAX_TRADING_WALLETS){let e=l.filter(e=>!w.has(e));e.length>0&&(N(e),e.forEach(e=>{w.add(e)}))}return l})},[em,ef,q,M,s,N,w,b]),eg=(0,r.useMemo)(()=>(C.length===U.length||C.length===H.MAX_TRADING_WALLETS)&&U.length>0,[C,U]),eb=(0,r.useCallback)(()=>{if(eg)M([]);else{let e=U.map(e=>e.publicKey);e.length>H.MAX_TRADING_WALLETS&&B.default.error(s(`Maximum of ${H.MAX_TRADING_WALLETS} trading wallets can be selected`));let t=e.slice(0,H.MAX_TRADING_WALLETS);if(b.size>=H.MAX_TRADING_WALLETS){let e=t.filter(e=>!w.has(e));e.length>0&&(N(e),e.forEach(e=>{w.add(e)}))}M(t)}},[eg,U,M,s,N,w,b]),ey="dropdown"===a?`flex flex-col gap-[16px] ${n?"w-full":"w-[348px]"}`:"flex flex-col gap-[16px] h-full w-full",ew="dropdown"===a?"border-secondaryStroke":"border-white/10",ev=e=>"dropdown"===a?`group text-textPrimary flex flex-row gap-[4px] text-[12px] leading-[16px] font-medium justify-start items-center rounded-full px-[7px] h-[24px] disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-transparent
        ${e?"border-secondaryStroke border-[1px] bg-secondaryStroke/60 hover:bg-secondaryStroke/90":"hover:border-transparent border-[1px] bg-secondaryStroke/30 border-secondaryStroke/20 hover:bg-secondaryStroke/60"} transition-colors duration-125 ease-in-out`:"bg-textPrimary/[0.05] hover:bg-textPrimary/[0.1] hover:transition-colors hover:ease-in-out hover:duration-150 flex flex-row px-[8px] h-[24px] min-h-[24px] justify-center items-center gap-[3px] rounded-full ml-[4px]",eN=()=>"dropdown"===a?n?"flex-1":"max-h-[252px] overflow-y-auto":Z.length>0?"max-h-[calc(50vh-150px)]":"h-0",ej=(0,r.useMemo)(()=>{let e=[];for(let t of b){let l=T.data.get(t)?.balanceSol;l&&l>0&&e.push(t)}return 0===e.length||e.every(e=>C.includes(e))},[b,T,C]),eA=(0,r.useCallback)(()=>{let e=[];for(let t of b){let l=T.data.get(t)?.balanceSol;if(l&&l>0){if(e.length>=H.MAX_TRADING_WALLETS){B.default.error(s(`Maximum of ${H.MAX_TRADING_WALLETS} wallets can be selected`));break}e.push(t)}}M(e)},[s,b,T,M]);return(0,t.jsxs)("div",{className:ey,children:["global"===e?(0,t.jsxs)("div",{className:`flex flex-col ${"sidebar"===a?"h-full":""}`,children:[(0,t.jsx)("div",{className:"flex flex-col",children:(0,t.jsxs)("div",{className:`flex flex-row gap-[4px] ${"dropdown"===a?"pl-[16px] pr-[12px]":"pl-[12px] pr-[12px]"} h-[44px] justify-between items-center`,children:[(0,t.jsxs)("div",{className:"flex flex-row gap-[8px] items-center",children:[(0,t.jsx)(A.Tooltip,{content:eg?s("Unselect all wallets"):s("Select all wallets"),children:(0,t.jsx)("button",{type:"button",className:ev(eg),onClick:eb,children:(0,t.jsx)("span",{className:"text-textPrimary text-[12px] leading-[16px] font-medium",children:eg?s("Unselect All"):s("Select All")})})}),(0,t.jsx)(A.Tooltip,{content:s("Select all wallets with balance"),children:(0,t.jsx)("button",{type:"button",className:ej?"group text-textPrimary flex flex-row gap-[4px] text-[12px] leading-[16px] font-medium justify-start items-center rounded-full px-[7px] h-[24px] opacity-50 cursor-not-allowed border-[1px] bg-secondaryStroke/30 border-secondaryStroke/20 transition-colors duration-125 ease-in-out":ev(!1),onClick:eA,disabled:ej,children:(0,t.jsx)("span",{className:"text-textPrimary text-[12px] leading-[16px] font-medium",children:s("Select All with Balance")})})})]}),(0,t.jsx)(A.Tooltip,{content:s("Multi Wallet Buy Settings"),children:(0,t.jsx)("button",{type:"button",className:"group flex items-center justify-center w-[24px] h-[24px] rounded-[4px] hover:bg-secondaryStroke/20 transition-colors duration-150 ease-in-out",onClick:()=>I(!0),children:(0,t.jsx)("i",{className:"ri-settings-3-line text-[13px] text-textTertiary group-hover:text-textSecondary transition-colors duration-150 ease-in-out"})})})]})}),(0,t.jsxs)("div",{className:`flex flex-col border-t ${ew} ${"sidebar"===a?"flex-1 overflow-y-auto":""} ${"dropdown"===a?n?"flex-1":"max-h-[342px] overflow-y-auto":"max-h-[calc(100vh-200px)]"}`,children:[W.map((e,l)=>{if("group-header"===e.type){let{activeCount:l,validCount:r,cumulativeBalance:a,uniqueHoldingsCount:o}=V(e.group);return(0,t.jsx)(k,{group:e.group,activeWalletCount:l,validWalletCount:r,isCollapsed:e.group.isCollapsed,onToggleCollapse:()=>G(e.group.groupId),onToggleActive:()=>X(e.group.groupId),cumulativeBalance:a,uniqueHoldingsCount:o,chain:"sol"},`group-${e.group.groupId}`)}let r=z.get(e.address);return r?(0,t.jsx)(F,{radial:!1,isSelected:C.includes(r.publicKey),walletName:r.name,walletAddress:r.publicKey,solBalance:T.data.get(r.publicKey)?.balanceSol??0,tokenCount:(0,D.countNonZeroTokenBalances)(x,r.publicKey),tokenTicker:o?.tokenTicker??void 0,onRowClick:()=>J(r.publicKey),onToggleClick:()=>J(r.publicKey),onTurboToggle:()=>Y(r.publicKey),borderColor:ew,isPrimary:r.isPrimary,isTurboEnabled:c.includes(r.publicKey)},`${r.publicKey}-${l}`):null}),1===U.length&&!n&&(0,t.jsxs)("button",{type:"button",onClick:()=>{i("wallets"),window.location.href="/portfolio"},className:"flex flex-row w-full h-[48px] px-[16px] gap-[16px] items-center hover:bg-primaryStroke/35 transition-colors duration-150 ease-in-out cursor-pointer",children:[(0,t.jsx)("i",{className:"ri-add-line text-[16px] text-textSecondary group-hover:text-textPrimary transition-colors duration-150 ease-in-out"}),(0,t.jsx)("span",{className:"text-textPrimary text-[14px] font-medium",children:s("Add Wallet")})]})]})]}):(0,t.jsxs)("div",{className:`flex flex-col ${"sidebar"===a?"h-full":""} gap-[16px] ${Z.length>0&&"sidebar"===a?"overflow-y-auto [&::-webkit-scrollbar]:hidden [-ms-overflow-style:none] [scrollbar-width:none]":""}`,children:[o&&Z.length>0&&(0,t.jsxs)("div",{className:`flex flex-col ${"sidebar"===a?"flex-1 max-h-[80%]":""}`,children:[(0,t.jsx)("div",{className:"flex flex-col",children:(0,t.jsxs)("div",{className:`flex flex-row gap-[4px] ${"dropdown"===a?"pl-[16px] pr-[12px]":"pl-[12px] pr-[12px]"} h-[44px] justify-between items-center`,children:[(0,t.jsx)(A.Tooltip,{content:ed?s(`Unselect all wallets with ${o.tokenTicker}`):s(`Select all wallets with ${o.tokenTicker}`),children:(0,t.jsx)("button",{type:"button",className:ev(ed),onClick:eu,children:(0,t.jsx)("span",{className:"text-textPrimary text-[12px] leading-[16px] font-medium",children:(q.length,`${ed?s("Unselect All"):s("Select All")}`)})})}),(0,t.jsxs)("div",{className:"flex flex-row gap-[8px] justify-start items-center",children:[(0,t.jsx)(A.Tooltip,{content:s("Moves all tokens to the selected wallet"),minWidth:"216px",children:(0,t.jsxs)("button",{type:"button",className:"group flex flex-row gap-[4px] text-textSecondary text-[12px] leading-[16px] font-medium justify-start items-center rounded-[4px] hover:bg-secondaryStroke/30 transition-colors duration-125 ease-in-out pl-[7px] pr-[6px] h-[24px] disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-transparent",onClick:et,disabled:p,children:[(0,t.jsx)("i",{className:"ri-git-branch-line text-[14px] text-textTertiary group-hover:text-textSecondary group-disabled:hover:text-textTertiary transition-colors duration-125 ease-in-out"}),s("Consolidate")]})}),(0,t.jsx)(A.Tooltip,{content:s("Splits tokens evenly between active wallets with 20% variance"),minWidth:"216px",children:(0,t.jsxs)("button",{type:"button",className:"group flex flex-row gap-[4px] text-textSecondary text-[12px] leading-[16px] font-medium justify-start items-center rounded-[4px] hover:bg-secondaryStroke/30 transition-colors duration-125 ease-in-out pl-[7px] pr-[6px] h-[24px] disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-transparent",onClick:el,children:[(0,t.jsx)("i",{className:"ri-git-merge-line text-[14px] text-textTertiary group-hover:text-textSecondary group-disabled:hover:text-textTertiary transition-colors duration-125 ease-in-out"}),s("Split Tokens")]})})]})]})}),(0,t.jsxs)("div",{className:`flex flex-col border-t ${ew} ${"sidebar"===a?"flex-1 overflow-y-auto":""} ${eN()}`,children:[Z.map((e,l)=>(0,t.jsx)(F,{radial:!1,isSelected:C.includes(e.publicKey),walletName:e.name,walletAddress:e.publicKey,solBalance:T.data.get(e.publicKey)?.balanceSol??0,tokenCount:(0,D.countNonZeroTokenBalances)(x,e.publicKey),tokenTicker:o?.tokenTicker??void 0,onRowClick:()=>J(e.publicKey),onToggleClick:()=>J(e.publicKey),isTurboEnabled:c.includes(e.publicKey),onTurboToggle:()=>Y(e.publicKey),borderColor:ew,tokenImage:o.tokenImage??void 0,tokenAmount:(0,D.findTokenBalance)(x,e.publicKey,o.tokenAddress,o.tokenDecimals),isPrimary:e.isPrimary},`token-${e.publicKey}-${l}`)),1===U.length&&!n&&(0,t.jsxs)("button",{type:"button",onClick:()=>{i("wallets"),window.location.href="/portfolio"},className:"flex flex-row w-full h-[48px] px-[16px] gap-[16px] items-center hover:bg-primaryStroke/35 transition-colors duration-150 ease-in-out cursor-pointer",children:[(0,t.jsx)("i",{className:"ri-add-line text-[16px] text-textSecondary group-hover:text-textPrimary transition-colors duration-150 ease-in-out"}),(0,t.jsx)("span",{className:"text-textPrimary text-[14px] font-medium",children:s("Add Wallet")})]})]})]}),o&&q.length>0&&(0,t.jsxs)("div",{className:`flex flex-col ${"sidebar"===a?`flex-1 ${Z.length>0?"max-h-[80%]":"h-full"}`:""}`,children:[(0,t.jsxs)("div",{className:"flex flex-row gap-[4px] px-[12px] py-[8px] justify-between items-center",children:[(0,t.jsxs)("div",{className:"flex flex-row gap-[8px] items-center",children:[(0,t.jsx)(A.Tooltip,{content:em?s(`Unselect all wallets without ${o.tokenTicker}`):s(`Select all wallets without ${o.tokenTicker}`),children:(0,t.jsx)("button",{type:"button",className:ev(em),onClick:eh,children:(0,t.jsx)("span",{className:"text-textPrimary text-[12px] leading-[16px] font-medium",children:(Z.length,`${em?s("Unselect All"):s("Select All")}`)})})}),(0,t.jsx)(A.Tooltip,{content:s("Select all wallets with balance"),children:(0,t.jsx)("button",{type:"button",className:ej?"group text-textPrimary flex flex-row gap-[4px] text-[12px] leading-[16px] font-medium justify-start items-center rounded-full px-[7px] h-[24px] opacity-50 cursor-not-allowed border-[1px] bg-secondaryStroke/30 border-secondaryStroke/20 transition-colors duration-125 ease-in-out":ev(!1),onClick:eA,disabled:ej,children:(0,t.jsx)("span",{className:"text-textPrimary text-[12px] leading-[16px] font-medium",children:s("Select All with Balance")})})})]}),(0,t.jsx)(A.Tooltip,{content:s("Multi Wallet Buy Settings"),children:(0,t.jsx)("button",{type:"button",className:"group flex items-center justify-center w-[24px] h-[24px] rounded-[4px] hover:bg-secondaryStroke/20 transition-colors duration-150 ease-in-out",onClick:()=>I(!0),children:(0,t.jsx)("i",{className:"ri-settings-3-line text-[13px] text-textTertiary group-hover:text-textSecondary transition-colors duration-150 ease-in-out"})})})]}),(0,t.jsxs)("div",{className:`flex flex-col border-t ${ew} ${"sidebar"===a?`flex-1 overflow-y-auto ${Z.length>0?"max-h-[calc(50vh-150px)]":"h-0"}`:""} ${eN()}`,children:[q.map((e,l)=>(0,t.jsx)(F,{radial:!1,isSelected:C.includes(e.publicKey),walletName:e.name,walletAddress:e.publicKey,solBalance:T.data.get(e.publicKey)?.balanceSol??0,tokenCount:(0,D.countNonZeroTokenBalances)(x,e.publicKey),tokenTicker:o?.tokenTicker??void 0,onToggleClick:()=>J(e.publicKey),onRowClick:()=>J(e.publicKey),isTurboEnabled:c.includes(e.publicKey),onTurboToggle:()=>Y(e.publicKey),borderColor:ew,isPrimary:e.isPrimary},`no-token-${e.publicKey}-${l}`)),1===U.length&&!n&&(0,t.jsxs)("button",{type:"button",onClick:()=>{i("wallets"),window.location.href="/portfolio"},className:"flex flex-row w-full h-[48px] px-[16px] gap-[16px] items-center hover:bg-primaryStroke/35 transition-colors duration-150 ease-in-out cursor-pointer",children:[(0,t.jsx)("i",{className:"ri-add-line text-[16px] text-textSecondary group-hover:text-textPrimary transition-colors duration-150 ease-in-out"}),(0,t.jsx)("span",{className:"text-textPrimary text-[14px] font-medium",children:s("Add Wallet")})]})]})]})]}),$&&(0,t.jsx)(ex,{onClose:()=>I(!1)})]})}),ex=({onClose:e})=>{let{t:a}=(0,E.useTranslation)(),[o,s]=(0,l.useAtom)(D.buyVarianceAtom),[d,x]=(0,l.useAtom)(D.transactionDelayMultiWalletAtom),p=(0,r.useRef)(null),[u,m]=(0,r.useState)(!1),[f,h]=(0,r.useState)(!0),g=(0,r.useCallback)(()=>{h(!1),setTimeout(()=>{e()},200)},[e]);return f?(0,c.createPortal)((0,t.jsx)(n.AnimatePresence,{mode:"wait",children:(0,t.jsx)(i.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},className:"fixed inset-0 bg-[#090909]/40 flex items-center justify-center z-[99999]",onClick:e=>{e.stopPropagation(),u&&e.target===e.currentTarget&&g()},onMouseDown:e=>{e.stopPropagation(),e.target===e.currentTarget&&m(!0)},onMouseUp:e=>{e.stopPropagation(),requestAnimationFrame(()=>{m(!1)})},children:(0,t.jsx)(i.motion.div,{ref:p,className:"relative w-[452px] max-h-[880px]",initial:{opacity:0,y:0,scale:1},animate:{opacity:1,y:4,scale:1},exit:{opacity:0,y:0,scale:1},transition:{duration:.15,ease:"easeOut"},onClick:e=>e.stopPropagation(),children:(0,t.jsxs)("div",{className:"flex flex-col w-full h-full bg-backgroundTertiary border-[1px] border-secondaryStroke rounded-[4px] shadow-[0_4px_4px_0_rgba(0,0,0,0.30),0_8px_8px_0_rgba(0,0,0,0.45)]",children:[(0,t.jsxs)("div",{className:"flex flex-row w-full h-[44px] pl-[16px] pr-[12px] justify-between items-center border-b-[1px] border-b-secondaryStroke",children:[(0,t.jsx)("span",{className:"text-textPrimary text-[14px] leading-[20px] tracking-[-0.02em] font-medium",children:a("Multi Wallet Buy Settings")}),(0,t.jsx)("button",{type:"button",onClick:g,className:"group flex flex-row p-[4px] w-[24px] h-[24px] justify-center items-center hover:bg-secondaryStroke/20 rounded-[4px] transition-colors duration-150 ease-in-out",children:(0,t.jsx)("i",{className:"ri-close-line text-textSecondary text-[16px] group-hover:text-textPrimary"})})]}),(0,t.jsxs)("div",{className:"flex flex-col w-full px-[16px] py-[16px] pb-[20px] gap-[16px]",children:[(0,t.jsx)("div",{className:"flex flex-col gap-[8px]",children:(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-textSecondary text-[12px] leading-[16px] font-normal",children:a("Buy Variance")}),(0,t.jsxs)("div",{className:"w-[60px] h-[28px] flex items-center rounded-[4px] bg-transparent border border-secondaryStroke hover:border-textPrimary/10 focus:border-textPrimary/10 hover:bg-secondaryStroke/10 focus:bg-secondaryStroke/10 overflow-hidden",children:[(0,t.jsx)("input",{type:"text",value:o,onChange:e=>{let t=e.target.value.replace(/[^0-9]/g,"");(""===t||100>=parseInt(t))&&s(parseInt(t)||0)},onBlur:e=>{let t=parseInt(e.target.value)||0;t>100&&(t=100),t<0&&(t=0),s(t)},className:"bg-transparent text-textPrimary text-[12px] text-center w-[36px] outline-none"}),(0,t.jsx)("span",{className:"text-textSecondary text-[12px] mr-1",children:"%"})]})]}),(0,t.jsx)("div",{className:"flex flex-col gap-[4px] w-full justify-start items-center",children:(0,t.jsx)(b,{value:o,onChange:e=>s(e),points:[0,25,50,75,100],formatLabel:e=>`${e}%`,maxLeverage:100,disabled:!1})}),(0,t.jsx)("span",{className:"text-textTertiary text-[12px] leading-[16px] font-normal",children:a("The variance of the buy amount across the selected wallets. 0% to 100% randomly.")})]})}),(0,t.jsx)("div",{className:"flex flex-col gap-[8px]",children:(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-textSecondary text-[12px] leading-[16px] font-normal",children:a("Transaction Delay")}),(0,t.jsxs)("div",{className:"w-[60px] h-[28px] flex items-center rounded-[4px] bg-transparent border border-secondaryStroke hover:border-textPrimary/10 focus:border-textPrimary/10 hover:bg-secondaryStroke/10 focus:bg-secondaryStroke/10 overflow-hidden",children:[(0,t.jsx)("input",{type:"text",value:d,onChange:e=>{let t=e.target.value.replace(/[^0-9]/g,"");(""===t||1e3>=parseInt(t))&&x(parseInt(t)||0)},onBlur:e=>{let t=parseInt(e.target.value)||0;t>1e3&&(t=1e3),t<0&&(t=0),x(t)},className:"bg-transparent text-textPrimary text-[12px] text-center w-[36px] outline-none"}),(0,t.jsx)("span",{className:"text-textSecondary text-[12px] mr-1",children:"ms"})]})]}),(0,t.jsx)("div",{className:"flex flex-col gap-[4px] w-full justify-start items-center",children:(0,t.jsx)(b,{value:d,onChange:e=>x(e),points:[0,250,500,750,1e3],formatLabel:e=>1e3===e?"1s":`${e}ms`,maxLeverage:1e3,disabled:!1})}),(0,t.jsx)("span",{className:"text-textTertiary text-[12px] leading-[16px] font-normal",children:a("The delay between each transaction in milliseconds. 0ms means no delay.")})]})})]}),(0,t.jsx)("div",{className:"border-t border-secondaryStroke/50 flex flex-row w-full h-[68px] justify-end items-center p-[16px] pb-[20px]",children:(0,t.jsx)("button",{type:"button",onClick:g,className:"bg-primaryBlue flex flex-row flex-1 h-[32px] px-[12px] gap-[8px] justify-center items-center rounded-full hover:bg-primaryBlue/80 hover:brightness-110 transition-all duration-[150ms] cursor-pointer",children:(0,t.jsx)("span",{className:"text-[14px] font-bold text-background",children:a("Done")})})})]})})})}),document.body):null},ep=(0,r.memo)(function(e){let r=(0,l.useAtomValue)(a.currentChainAtom);return"sol"===r?(0,t.jsx)(ed,{...e}):"bnb"===r?(0,t.jsx)(z,{...e}):((0,o.assertUnreachable)(r),null)});e.s(["MultiWalletDropdownContent",0,ep],120683)}]);